"use strict";var introText=document.querySelectorAll(".intro-text"),introBtn=document.querySelector(".intro-btn"),racoon=document.querySelector(".racoon"),intro=document.querySelector(".intro"),nav=document.querySelector(".navbar"),viewportWidth=window.innerWidth,cards=document.querySelectorAll(".services__cards .card"),cardsActivatorHandler=function(){cards.forEach(function(e){e.addEventListener("click",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}),e.addEventListener("touchend",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")})})},cardOutsideHandler=function(e){e.target.classList.contains("card")||cards.forEach(function(e){e.classList.remove("active")})},navHandler=function(){function o(){r.classList.remove("active"),r.setAttribute("aria-expanded","false"),t.classList.remove("active")}var t=document.querySelector(".navbar"),e=document.querySelector(".burger-icon"),n=document.querySelectorAll(".mobile-nav a"),a=document.querySelector(".nav-list-background"),r=e.cloneNode(!0),e=(r.addEventListener("click",function(){r.classList.toggle("active"),t.classList.toggle("active");var e="false"!=(e=r.getAttribute("aria-expanded"));r.setAttribute("aria-expanded",!e)}),e.replaceWith(r),n.forEach(function(e){var t=e.cloneNode(!0);t.addEventListener("click",o),e.replaceWith(t)}),a.cloneNode());e.addEventListener("click",o),a.replaceWith(e)},headerParallaxHandler=function(){var e,t,o;viewportWidth<768?(document.querySelector(".intro").classList.remove("fixed"),introBtn.style.opacity="1",racoon.style.opacity="1",introText.forEach(function(e){e.style.transform="translate(0, 0)"})):(e=window.scrollY,t=.1*window.scrollY,o=1/(e/100+1),introText[0].style.transform="translate(".concat(14*t,"px)"),introText[1].style.transform="translate(".concat(-3*t,"px)"),introText[2].style.transform="translate(".concat(16*t,"px)"),introText[3].style.transform="translate(".concat(17*t,"px)"),introText[4].style.transform="translate(".concat(-9*t,"px)"),introText[5].style.transform="translate(".concat(17.5*t,"px)"),e>window.innerHeight?(intro.style.pointerEvents="none",intro.style.opacity="0"):(introBtn.style.opacity="".concat(o),racoon.style.opacity="".concat(o),intro.style.pointerEvents="all",intro.style.opacity="1"))},processesInfo=[{heading:"What drives Stratosys Tech’s innovation?",text:"Stratosys Tech Private Limited is a technology company focused on solving realworld challenges through innovation and empathy. We are not limited to one industry — our approach blends compliance, design, and digital transformation to create products that make a difference.",button:"Who We Are"},{heading:"Where do we aim to lead globally?",text:"To become a global leader in inclusive technology solutions that empower underserved communities.",button:"Vision"},{heading:"How do we empower through technology?",text:"Build scalable, compliant digital platforms , Empower professionals and end-users with intuitive tools , Expand across industries while staying human-centered",button:"Mission"}],processTitle=document.querySelector(".processes-content-title"),processText=document.querySelector(".processes-content-text"),processBtns=document.querySelectorAll(".processes-list-item"),chengeProcess=function(e){e=e.target;e.classList.contains("active")||(closeAllProcesses(),e.classList.toggle("active"),setContent())},closeAllProcesses=function(){processBtns.forEach(function(e){return e.classList.remove("active")})},setContent=function(){for(var e=0;e<processesInfo.length;e++)if(processBtns[e].classList.contains("active"))return processTitle.textContent=processesInfo[e].heading,void(processText.textContent=processesInfo[e].text)},prevSection=document.querySelector(".services"),nextSection=document.querySelector(".parallax-hero"),projectsParallaxHandler=function(){var e,t,o,n,a;viewportWidth<992?nextSection.style.transform="translate(0, 0)":(e=document.querySelector(".projects-desktop-cnt .projects-showcase"),t=document.querySelectorAll(".projects-desktop-cnt .project"),n=prevSection.offsetTop,a=document.querySelector(".projects .section__heading"),o=window.scrollY,n=n+prevSection.offsetHeight+a.offsetHeight+Math.floor(nav.offsetHeight/2),a=nextSection.offsetTop-window.innerHeight+Math.floor(nav.offsetHeight/2),o<n?e.style.transform="translate(0, Calc(-100% + ".concat(window.innerHeight,"px))"):a<o?e.style.transform="translate(0, ".concat((t.length-1)*window.innerHeight,"px)"):n<o&&(e.style.transform="translate(0, Calc(-100% + ".concat(window.innerHeight+2*(o-n),"px))")))},firstSection=document.querySelector(".processes"),secondSection=document.querySelector(".characteristics"),parallaxHero=document.querySelector(".parallax-hero"),handleParallaxSection=function(){var e,t;viewportWidth<992?(secondSection.style.transform="translate(0, 0)",parallaxHero.style.height="0"):(t=(e=parallaxHero.offsetTop-window.scrollY)+viewportWidth,parallaxHero.style.height="Calc(".concat(window.innerHeight+viewportWidth,"px - 5rem)"),t<=0?(firstSection.style.transform="translate(-".concat(viewportWidth,"px, 0)"),secondSection.style.transform="translate(0, ".concat(t,"px)")):e<=0?(firstSection.style.transform="translate(".concat(e,"px, 0)"),secondSection.style.transform="translate(Calc(100% + ".concat(e,"px), 0)")):(firstSection.style.transform="translate(0, ".concat(e,"px)"),secondSection.style.transform="translate(100%, ".concat(e,"px)")))},parallaxTexts=document.querySelectorAll(".characteristics-item"),handleParallaxItems=function(e){e.target.classList.contains("reset-pos")&&e.target.classList.remove("reset-pos"),e.target.classList.add("add-pos");var t=e.clientX,o=e.clientY,n=e.target.offsetWidth/2,e=e.target.offsetHeight/2,a=(n-t)/40,r=(e-o)/40;parallaxTexts.forEach(function(e){e.classList.contains("reset-pos")&&e.classList.remove("reset-pos"),e.classList.add("add-pos"),e.style.setProperty("--transform-y","".concat(r,"px")),e.style.setProperty("--transform-x","".concat(a,"px"))})};secondSection.addEventListener("mousemove",handleParallaxItems),secondSection.addEventListener("mouseout",function(){parallaxTexts.forEach(function(e){e.classList.add("reset-pos"),e.classList.remove("add-pos")})}),window.onload=function(){headerParallaxHandler(),viewportWidth<=768&&navHandler(),projectsParallaxHandler(),handleParallaxSection()},processBtns.forEach(function(e){return e.addEventListener("click",chengeProcess)}),window.addEventListener("click",function(e){cardOutsideHandler(e)}),window.addEventListener("scroll",function(){headerParallaxHandler(),projectsParallaxHandler(),handleParallaxSection()}),window.addEventListener("resize",function(){viewportWidth=window.innerWidth,headerParallaxHandler(),viewportWidth<=768&&navHandler(),992<=viewportWidth||(handleParallaxSection(),projectsParallaxHandler(),cardsActivatorHandler())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW50cm9UZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW50cm9CdG4iLCJxdWVyeVNlbGVjdG9yIiwicmFjb29uIiwiaW50cm8iLCJ3aW5kb3ciLCJ2aWV3cG9ydFdpZHRoIiwiY2FyZHNBY3RpdmF0b3JIYW5kbGVyIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibW5hdkl0ZW1zIiwiY2xvc2UiLCJidXJnZXJJY29uIiwib2xkQnVyZ2VySWNvbiIsImNsb25lTm9kZSIsInJlcGxhY2VXaXRoIiwib2xkTmF2TGlzdEJhY2tncm91bmQiLCJyZXZlYWwiLCJ0b2dnbGUiLCJuYXZiYXIiLCJvbGRJdGVtIiwiaGVhZGVyUGFyYWxsYXhIYW5kbGVyIiwiaXNFeHBhbmRlZCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIml0ZW0iLCJuYXZMaXN0QmFja2dyb3VuZCIsInRyYW5zZm9ybSIsInN0eWxlIiwib3BhY2l0eSIsInRleHQiLCJyYXRlIiwicG9pbnRlckV2ZW50cyIsImNvbmNhdCIsIm9wYWNpdHlWYWx1ZSIsIm9mZnNldFkiLCJpbm5lckhlaWdodCIsInByb2Nlc3Nlc0luZm8iLCJoZWFkaW5nIiwiYnV0dG9uIiwicHJvY2Vzc1RpdGxlIiwicHJvY2Vzc1RleHQiLCJwcm9jZXNzQnRucyIsImNoZW5nZVByb2Nlc3MiLCJidG4iLCJ0YXJnZXQiLCJjbG9zZUFsbFByb2Nlc3NlcyIsImUiLCJzZXRDb250ZW50IiwidGV4dENvbnRlbnQiLCJwcm9qZWN0c1BhcmFsbGF4SGFuZGxlciIsImxlbmd0aCIsImkiLCJuZXh0U2VjdGlvbiIsInNlY29uZEFuY2hvclBvaW50Iiwib2Zmc2V0VG9wIiwic2Nyb2xsVmFsdWUiLCJmaXJzdEFuY2hvclBvaW50IiwicHJvamVjdHNTaG93Y2FzZSIsInByb2plY3RzIiwicGFyYWxsYXhIZXJvIiwiaGFuZGxlUGFyYWxsYXhTZWN0aW9uIiwiZmlyc3RTZWN0aW9uIiwic2Vjb25kU2VjdGlvbiIsInByZXZTZWN0aW9uT2Zmc2V0IiwicHJldlNlY3Rpb24iLCJzZWN0aW9uSGVhZGluZyIsIk1hdGgiLCJmbG9vciIsIm5hdiIsIm9mZnNldEhlaWdodCIsImZpcnN0QW5jaG9yIiwic2Vjb25kQW5jaG9yIiwicGFyYWxsYXhUZXh0cyIsImhhbmRsZVBhcmFsbGF4SXRlbXMiLCJoZWlnaHQiLCJzY3JvbGxZIiwiY2xpZW50WCIsIm9mZnNldFdpZHRoIiwiZmluYWxZIiwic2V0UHJvcGVydHkiLCJ4Iiwib25sb2FkIiwibmF2SGFuZGxlciIsIm1pZGRsZVgiLCJtaWRkbGVZIiwieSIsImNhcmRPdXRzaWRlSGFuZGxlciIsImZpbmFsWCIsImlubmVyV2lkdGgiXSwibWFwcGluZ3MiOiJhQUFBLElBQU1BLFVBQVlDLFNBQVNDLGlCQUFpQixhQUFhLEVBQ25EQyxTQUFXRixTQUFTRyxjQUFjLFlBQVksRUFEOUNKLE9BQVNDLFNBQVdHLGNBQUNGLFNBQWlCLEVBQ3RDQyxNQUFRRixTQUFXRyxjQUFjLFFBQUMsRUFDbENDLElBQU1KLFNBQVdHLGNBQWMsU0FBQyxFQUNoQ0UsY0FBZ0JDLE9BQUNILFdBRW5CSSxNQUFBQSxTQUFnQkQsaUJBQWlCLHdCQUFBLEVBSS9CRSxzQkFBd0IsV0FDN0JDLE1BQUtDLFFBQVEsU0FBQ0MsR0FDYkEsRUFBQUEsaUJBQUtDLFFBQXdCLFdBQzVCSCxNQUFBQSxRQUFNQyxTQUFBQSxHQUNMRyxFQUFBQyxVQUFPQSxTQUFVQyxRQUFTLEdBQ3pCRixFQUFHQyxVQUFBQSxPQUFVRSxRQUFPLENBRXRCLENBQUMsRUFDREwsRUFBQUEsVUFBS0csSUFBVUcsUUFBSSxDQUNwQixDQUFDLEVBRUROLEVBQ0NGLGlCQUFjLFdBQVEsV0FBdEJBLE1BQ0NDLFFBQU9JLFNBQUFBLEdBQUhELEVBQ0hBLFVBQUdDLFNBQWlCLFFBQVEsR0FBNUJELEVBQ0RD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QUN0QnBFLEVBQUFBLFVBQUFBLE9BQXNCLFNBQUMsQ0E1QnhCLENBNkJBLENBNUJELENBQUMsRUFJRHZCLE9BNkJFb0QsT0FBQUEsV0E1QkQ3QixzQkE2QnFCLEVBQ3BCdEIsZUFBQSxLQTVCQW9GLFdBQVcsRUFFWmpDLHdCQUF3QixFQUN4Qlcsc0JBQXNCLENBQ3ZCLEVBRUFuQixZQUFZeEMsUUFBUSxTQUFDMEMsR0FBRyxPQUFLQSxFQUFJeEMsaUJBQWlCLFFBQVN1QyxhQUFhLENBQUMsQ0FBQSxFQUV6RTdDLE9BQU9NLGlCQUFpQixRQUFTLFNBQUMyQyxHQUNqQ3dDLG1CQUFtQnhDLENBQUMsQ0FDckIsQ0FBQyxFQUVEakQsT0FBT00saUJBQWlCLFNBQVUsV0FDakNpQixzQkFBc0IsRUFDdEI2Qix3QkFBd0IsRUFDeEJXLHNCQUFzQixDQUN2QixDQUFDLEVBRUQvRCxPQUFPTSxpQkFBaUIsU0FBVSxXQUNqQ0wsY0FBZ0JELE9BQU8yRixXQUN0QnBFLHNCQUFzQixFQUNuQnRCLGVBQWlCLEtBQ3BCb0YsV0FBVyxFQUVTLEtBQWpCcEYsZ0JBQ0g4RCxzQkFBc0IsRUFDdEJYLHdCQUF3QixFQUN6QmxELHNCQUFzQixFQUN2QixDQUFDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW50cm9UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmludHJvLXRleHQnKTtcclxuY29uc3QgaW50cm9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8tYnRuJyk7XHJcbmNvbnN0IHJhY29vbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYWNvb24nKTtcclxuY29uc3QgaW50cm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8nKTtcclxuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xyXG5sZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VydmljZXNfX2NhcmRzIC5jYXJkJyk7XHJcblxyXG5jb25zdCBjYXJkc0FjdGl2YXRvckhhbmRsZXIgPSAoKSA9PiB7XHJcblx0Y2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG5cdFx0Y2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y2FyZHMuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdFx0XHRpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNhcmQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XHJcblx0XHRcdGNhcmRzLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRcdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGNhcmQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRPdXRzaWRlSGFuZGxlciA9IChlKSA9PiB7XHJcblx0aWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQnKSkge1xyXG5cdFx0Y2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG5cdFx0XHRjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgbmF2SGFuZGxlciA9ICgpID0+IHtcclxuXHRjb25zdCBuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XHJcblx0Y29uc3Qgb2xkQnVyZ2VySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItaWNvbicpO1xyXG5cdGNvbnN0IG1uYXZJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtbmF2IGEnKTtcclxuXHRjb25zdCBvbGROYXZMaXN0QmFja2dyb3VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtbGlzdC1iYWNrZ3JvdW5kJyk7XHJcblx0Y29uc3QgcmV2ZWFsID0gKCkgPT4ge1xyXG5cdFx0YnVyZ2VySWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuXHRcdG5hdmJhci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgIGxldCBpc0V4cGFuZGVkID0gYnVyZ2VySWNvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKVxyXG4gICAgaWYoaXNFeHBhbmRlZCA9PSAnZmFsc2UnKXtcclxuICAgICAgaXNFeHBhbmRlZCA9IGZhbHNlXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaXNFeHBhbmRlZCA9IHRydWVcclxuICAgIH1cclxuICAgIGJ1cmdlckljb24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgIWlzRXhwYW5kZWQpXHJcblx0fTtcclxuXHRjb25zdCBjbG9zZSA9ICgpID0+IHtcclxuXHRcdGJ1cmdlckljb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICBidXJnZXJJY29uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXHJcblx0XHRuYXZiYXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0fTtcclxuXHRjb25zdCBidXJnZXJJY29uID0gb2xkQnVyZ2VySWNvbi5jbG9uZU5vZGUodHJ1ZSk7XHJcblx0YnVyZ2VySWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJldmVhbCk7XHJcblx0b2xkQnVyZ2VySWNvbi5yZXBsYWNlV2l0aChidXJnZXJJY29uKTtcclxuXHRtbmF2SXRlbXMuZm9yRWFjaCgob2xkSXRlbSkgPT4ge1xyXG5cdFx0Y29uc3QgaXRlbSA9IG9sZEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlKTtcclxuXHRcdG9sZEl0ZW0ucmVwbGFjZVdpdGgoaXRlbSk7XHJcblx0fSk7XHJcblx0Y29uc3QgbmF2TGlzdEJhY2tncm91bmQgPSBvbGROYXZMaXN0QmFja2dyb3VuZC5jbG9uZU5vZGUoKTtcclxuXHRuYXZMaXN0QmFja2dyb3VuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlKTtcclxuXHRvbGROYXZMaXN0QmFja2dyb3VuZC5yZXBsYWNlV2l0aChuYXZMaXN0QmFja2dyb3VuZCk7XHJcbn07XHJcblxyXG5jb25zdCBoZWFkZXJQYXJhbGxheEhhbmRsZXIgPSAoKSA9PiB7XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA3NjgpIHtcclxuXHRcdGNvbnN0IGludHJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvJyk7XHJcblx0XHRpbnRyby5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZCcpO1xyXG4gICAgaW50cm9CdG4uc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgcmFjb29uLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgIGludHJvVGV4dC5mb3JFYWNoKHRleHQgPT4ge1xyXG4gICAgICB0ZXh0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXHJcbiAgICB9KVxyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3Qgb2Zmc2V0WSA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cdGNvbnN0IHJhdGUgPSB3aW5kb3cuc2Nyb2xsWSAqIDAuMTtcclxuXHRjb25zdCBvcGFjaXR5VmFsdWUgPSAxIC8gKG9mZnNldFkgLyAxMDAgKyAxKTtcclxuXHJcblx0aW50cm9UZXh0WzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTR9cHgpYDtcclxuXHRpbnRyb1RleHRbMV0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAtM31weClgO1xyXG5cdGludHJvVGV4dFsyXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIDE2fXB4KWA7XHJcblx0aW50cm9UZXh0WzNdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTd9cHgpYDtcclxuXHRpbnRyb1RleHRbNF0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAtOX1weClgO1xyXG5cdGludHJvVGV4dFs1XS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIDE3LjV9cHgpYDtcclxuXHJcblx0aWYgKG9mZnNldFkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcclxuXHRcdGludHJvLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcblx0XHRpbnRyby5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRpbnRyb0J0bi5zdHlsZS5vcGFjaXR5ID0gYCR7b3BhY2l0eVZhbHVlfWA7XHJcblx0XHRyYWNvb24uc3R5bGUub3BhY2l0eSA9IGAke29wYWNpdHlWYWx1ZX1gO1xyXG5cdFx0aW50cm8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhbGwnO1xyXG5cdFx0aW50cm8uc3R5bGUub3BhY2l0eSA9ICcxJztcclxuXHR9XHJcbn07XHJcblxyXG4vLyBQcm9jZXNzZXMgLSBsaXN0XHJcbmNvbnN0IHByb2Nlc3Nlc0luZm8gPSBbXHJcblx0IHtcclxuICAgICAgICBoZWFkaW5nOiAnV2hhdCBkcml2ZXMgU3RyYXRvc3lzIFRlY2jigJlzIGlubm92YXRpb24/JyxcclxuICAgICAgICB0ZXh0OiAnU3RyYXRvc3lzIFRlY2ggUHJpdmF0ZSBMaW1pdGVkIGlzIGEgdGVjaG5vbG9neSBjb21wYW55IGZvY3VzZWQgb24gc29sdmluZyByZWFsd29ybGQgY2hhbGxlbmdlcyB0aHJvdWdoIGlubm92YXRpb24gYW5kIGVtcGF0aHkuIFdlIGFyZSBub3QgbGltaXRlZCB0byBvbmUgaW5kdXN0cnkg4oCUIG91ciBhcHByb2FjaCBibGVuZHMgY29tcGxpYW5jZSwgZGVzaWduLCBhbmQgZGlnaXRhbCB0cmFuc2Zvcm1hdGlvbiB0byBjcmVhdGUgcHJvZHVjdHMgdGhhdCBtYWtlIGEgZGlmZmVyZW5jZS4nLFxyXG4gICAgICAgIGJ1dHRvbjogJ1dobyBXZSBBcmUnLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGluZzogJ1doZXJlIGRvIHdlIGFpbSB0byBsZWFkIGdsb2JhbGx5PycsXHJcbiAgICAgICAgdGV4dDogJ1RvIGJlY29tZSBhIGdsb2JhbCBsZWFkZXIgaW4gaW5jbHVzaXZlIHRlY2hub2xvZ3kgc29sdXRpb25zIHRoYXQgZW1wb3dlciB1bmRlcnNlcnZlZCBjb21tdW5pdGllcy4nLFxyXG4gICAgICAgIGJ1dHRvbjogJ1Zpc2lvbicsXHJcbiAgICAgIH0sXHJcblx0e1xyXG5cdGhlYWRpbmc6ICdIb3cgZG8gd2UgZW1wb3dlciB0aHJvdWdoIHRlY2hub2xvZ3k/JyxcclxuXHR0ZXh0OiAnQnVpbGQgc2NhbGFibGUsIGNvbXBsaWFudCBkaWdpdGFsIHBsYXRmb3JtcyAsIEVtcG93ZXIgcHJvZmVzc2lvbmFscyBhbmQgZW5kLXVzZXJzIHdpdGggaW50dWl0aXZlIHRvb2xzICwgRXhwYW5kIGFjcm9zcyBpbmR1c3RyaWVzIHdoaWxlIHN0YXlpbmcgaHVtYW4tY2VudGVyZWQnLFxyXG5cdGJ1dHRvbjogJ01pc3Npb24nLFxyXG5cdH0sXHJcbl07XHJcbmNvbnN0IHByb2Nlc3NUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMtY29udGVudC10aXRsZScpO1xyXG5jb25zdCBwcm9jZXNzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMtY29udGVudC10ZXh0Jyk7XHJcbmNvbnN0IHByb2Nlc3NCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2Nlc3Nlcy1saXN0LWl0ZW0nKTtcclxuY29uc3QgY2hlbmdlUHJvY2VzcyA9IChlKSA9PiB7XHJcblx0Y29uc3QgYnRuID0gZS50YXJnZXQ7XHJcblxyXG5cdGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjbG9zZUFsbFByb2Nlc3NlcygpO1xyXG5cdFx0YnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG5cdH1cclxuXHRzZXRDb250ZW50KCk7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZUFsbFByb2Nlc3NlcyA9ICgpID0+IHtcclxuXHRwcm9jZXNzQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcbn07XHJcblxyXG5jb25zdCBzZXRDb250ZW50ID0gKCkgPT4ge1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgcHJvY2Vzc2VzSW5mby5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKHByb2Nlc3NCdG5zW2ldLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdFx0cHJvY2Vzc1RpdGxlLnRleHRDb250ZW50ID0gcHJvY2Vzc2VzSW5mb1tpXS5oZWFkaW5nO1xyXG5cdFx0XHRwcm9jZXNzVGV4dC50ZXh0Q29udGVudCA9IHByb2Nlc3Nlc0luZm9baV0udGV4dDtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbi8qIFBST0pFQ1RTIFBBUkFMTEFYICovXHJcbmNvbnN0IHByZXZTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2VzJyk7XHJcbmNvbnN0IG5leHRTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcmFsbGF4LWhlcm8nKTtcclxuY29uc3QgcHJvamVjdHNQYXJhbGxheEhhbmRsZXIgPSAoKSA9PiB7XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA5OTIpe1xyXG4gICAgbmV4dFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSdcclxuICAgIHJldHVybiBcclxuICB9XHJcbiAgY29uc3QgcHJvamVjdHNTaG93Y2FzZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCAucHJvamVjdHMtc2hvd2Nhc2UnKTtcclxuICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0cy1kZXNrdG9wLWNudCAucHJvamVjdCcpXHJcbiAgbGV0IHByZXZTZWN0aW9uT2Zmc2V0ID0gcHJldlNlY3Rpb24ub2Zmc2V0VG9wO1xyXG5cdGNvbnN0IHNlY3Rpb25IZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzIC5zZWN0aW9uX19oZWFkaW5nJyk7XHJcbiAgY29uc3Qgc2Nyb2xsVmFsdWUgPSB3aW5kb3cuc2Nyb2xsWVxyXG5cdGxldCBmaXJzdEFuY2hvclBvaW50ID1cclxuXHRcdHByZXZTZWN0aW9uT2Zmc2V0ICtcclxuXHRcdHByZXZTZWN0aW9uLm9mZnNldEhlaWdodCArXHJcblx0XHRzZWN0aW9uSGVhZGluZy5vZmZzZXRIZWlnaHQgK1xyXG4gICAgTWF0aC5mbG9vcihuYXYub2Zmc2V0SGVpZ2h0IC8gMilcclxuXHRsZXQgc2Vjb25kQW5jaG9yUG9pbnQgPSBuZXh0U2VjdGlvbi5vZmZzZXRUb3AgLSB3aW5kb3cuaW5uZXJIZWlnaHQgKyBNYXRoLmZsb29yKG5hdi5vZmZzZXRIZWlnaHQgLyAyKVxyXG4gIGlmIChzY3JvbGxWYWx1ZSA8IGZpcnN0QW5jaG9yUG9pbnQpIHtcclxuICAgIHByb2plY3RzU2hvd2Nhc2Uuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwLCBDYWxjKC0xMDAlICsgJHt3aW5kb3cuaW5uZXJIZWlnaHR9cHgpKWBcclxuICB9XHJcbiAgZWxzZSBpZiAoc2Nyb2xsVmFsdWUgPiBzZWNvbmRBbmNob3JQb2ludCl7XHJcbiAgICBwcm9qZWN0c1Nob3djYXNlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHsocHJvamVjdHMubGVuZ3RoIC0gMSkgKiB3aW5kb3cuaW5uZXJIZWlnaHR9cHgpYFxyXG4gIH1cclxuICBlbHNlIGlmIChzY3JvbGxWYWx1ZSA+IGZpcnN0QW5jaG9yUG9pbnQpIHtcclxuICAgIHByb2plY3RzU2hvd2Nhc2Uuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwLCBDYWxjKC0xMDAlICsgJHt3aW5kb3cuaW5uZXJIZWlnaHQgKyAoc2Nyb2xsVmFsdWUgLSBmaXJzdEFuY2hvclBvaW50KSAqIDJ9cHgpKWBcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGZpcnN0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMnKTtcclxuY29uc3Qgc2Vjb25kU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJpc3RpY3MnKTtcclxuY29uc3QgcGFyYWxsYXhIZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcmFsbGF4LWhlcm8nKTtcclxuXHJcbmNvbnN0IGhhbmRsZVBhcmFsbGF4U2VjdGlvbiA9ICgpID0+IHtcclxuXHRpZiAodmlld3BvcnRXaWR0aCA8IDk5Mil7XHJcbiAgICBzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXHJcbiAgICBwYXJhbGxheEhlcm8uc3R5bGUuaGVpZ2h0ID0gJzAnXHJcbiAgICByZXR1cm5cclxuICB9ICBcclxuICBjb25zdCBmaXJzdEFuY2hvciA9IHBhcmFsbGF4SGVyby5vZmZzZXRUb3AgLSB3aW5kb3cuc2Nyb2xsWVxyXG4gIGNvbnN0IHNlY29uZEFuY2hvciA9IGZpcnN0QW5jaG9yICsgdmlld3BvcnRXaWR0aFxyXG4gIHBhcmFsbGF4SGVyby5zdHlsZS5oZWlnaHQgPSBgQ2FsYygke3dpbmRvdy5pbm5lckhlaWdodCArIHZpZXdwb3J0V2lkdGh9cHggLSA1cmVtKWBcclxuICBpZihzZWNvbmRBbmNob3IgPD0gMCkge1xyXG4gICAgZmlyc3RTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoLSR7dmlld3BvcnRXaWR0aH1weCwgMClgXHJcbiAgICBzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtzZWNvbmRBbmNob3J9cHgpYFxyXG4gIH1cclxuICBlbHNlIGlmKGZpcnN0QW5jaG9yIDw9IDApIHtcclxuICAgIGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7Zmlyc3RBbmNob3J9cHgsIDApYFxyXG4gICAgc2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSAgYHRyYW5zbGF0ZShDYWxjKDEwMCUgKyAke2ZpcnN0QW5jaG9yfXB4KSwgMClgXHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgZmlyc3RTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtmaXJzdEFuY2hvcn1weClgXHJcbiAgICBzZWNvbmRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMTAwJSwgJHtmaXJzdEFuY2hvcn1weClgXHJcbiAgfVxyXG59O1xyXG5cclxuLy8gcGFyYWxsYXggSXRlbXNcclxuXHJcbmNvbnN0IHBhcmFsbGF4VGV4dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcmFjdGVyaXN0aWNzLWl0ZW0nKTtcclxuY29uc3QgaGFuZGxlUGFyYWxsYXhJdGVtcyA9IChlKSA9PiB7XHJcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncmVzZXQtcG9zJykpIHtcclxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc2V0LXBvcycpO1xyXG5cdH1cclxuXHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhZGQtcG9zJyk7XHJcblxyXG5cdGxldCB4ID0gZS5jbGllbnRYO1xyXG5cdGxldCB5ID0gZS5jbGllbnRZO1xyXG5cdGNvbnN0IG1pZGRsZVggPSBlLnRhcmdldC5vZmZzZXRXaWR0aCAvIDI7XHJcblx0Y29uc3QgbWlkZGxlWSA9IGUudGFyZ2V0Lm9mZnNldEhlaWdodCAvIDI7XHJcblx0bGV0IGZpbmFsWCA9IChtaWRkbGVYIC0geCkgLyA0MDtcclxuXHRsZXQgZmluYWxZID0gKG1pZGRsZVkgLSB5KSAvIDQwO1xyXG5cclxuXHRwYXJhbGxheFRleHRzLmZvckVhY2goKHRleHQpID0+IHtcclxuXHRcdGlmICh0ZXh0LmNsYXNzTGlzdC5jb250YWlucygncmVzZXQtcG9zJykpIHtcclxuXHRcdFx0dGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdyZXNldC1wb3MnKTtcclxuXHRcdH1cclxuXHRcdHRleHQuY2xhc3NMaXN0LmFkZCgnYWRkLXBvcycpO1xyXG5cclxuXHRcdHRleHQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdHJhbnNmb3JtLXknLCBgJHtmaW5hbFl9cHhgKTtcclxuXHRcdHRleHQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdHJhbnNmb3JtLXgnLCBgJHtmaW5hbFh9cHhgKTtcclxuXHR9KTtcclxufTtcclxuXHJcbnNlY29uZFNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlUGFyYWxsYXhJdGVtcyk7XHJcbnNlY29uZFNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XHJcblx0cGFyYWxsYXhUZXh0cy5mb3JFYWNoKCh0ZXh0KSA9PiB7XHJcblx0XHR0ZXh0LmNsYXNzTGlzdC5hZGQoJ3Jlc2V0LXBvcycpO1xyXG5cdFx0dGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdhZGQtcG9zJyk7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuLy8gZnVuY3Rpb25zIGFjdGlvbnNcclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcblx0aGVhZGVyUGFyYWxsYXhIYW5kbGVyKCk7XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPD0gNzY4KSB7XHJcblx0XHRuYXZIYW5kbGVyKCk7XHJcblx0fVxyXG5cdHByb2plY3RzUGFyYWxsYXhIYW5kbGVyKCk7XHJcblx0aGFuZGxlUGFyYWxsYXhTZWN0aW9uKCk7XHJcbn07XHJcblxyXG5wcm9jZXNzQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZW5nZVByb2Nlc3MpKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0Y2FyZE91dHNpZGVIYW5kbGVyKGUpO1xyXG59KTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcblx0aGVhZGVyUGFyYWxsYXhIYW5kbGVyKCk7XHJcblx0cHJvamVjdHNQYXJhbGxheEhhbmRsZXIoKTtcclxuXHRoYW5kbGVQYXJhbGxheFNlY3Rpb24oKTtcclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG5cdHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICBoZWFkZXJQYXJhbGxheEhhbmRsZXIoKVxyXG5cdGlmICh2aWV3cG9ydFdpZHRoIDw9IDc2OCkge1xyXG5cdFx0bmF2SGFuZGxlcigpO1xyXG5cdH1cclxuXHRpZiAodmlld3BvcnRXaWR0aCA+PSA5OTIpIHJldHVybjtcclxuICBoYW5kbGVQYXJhbGxheFNlY3Rpb24oKTtcclxuICBwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpXHJcblx0Y2FyZHNBY3RpdmF0b3JIYW5kbGVyKCk7XHJcbn0pO1xyXG4iXX0=
