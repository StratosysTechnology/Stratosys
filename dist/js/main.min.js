"use strict";var introText=document.querySelectorAll(".intro-text"),introBtn=document.querySelector(".intro-btn"),racoon=document.querySelector(".racoon"),intro=document.querySelector(".intro"),nav=document.querySelector(".navbar"),viewportWidth=window.innerWidth,cards=document.querySelectorAll(".services__cards .card"),cardsActivatorHandler=function(){cards.forEach(function(e){e.addEventListener("click",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}),e.addEventListener("touchend",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")})})},cardOutsideHandler=function(e){e.target.classList.contains("card")||cards.forEach(function(e){e.classList.remove("active")})},navHandler=function(){function n(){r.classList.remove("active"),r.setAttribute("aria-expanded","false"),t.classList.remove("active")}var t=document.querySelector(".navbar"),e=document.querySelector(".burger-icon"),o=document.querySelectorAll(".mobile-nav a"),a=document.querySelector(".nav-list-background"),r=e.cloneNode(!0),e=(r.addEventListener("click",function(){r.classList.toggle("active"),t.classList.toggle("active");var e="false"!=(e=r.getAttribute("aria-expanded"));r.setAttribute("aria-expanded",!e)}),e.replaceWith(r),o.forEach(function(e){var t=e.cloneNode(!0);t.addEventListener("click",n),e.replaceWith(t)}),a.cloneNode());e.addEventListener("click",n),a.replaceWith(e)},headerParallaxHandler=function(){var e,t,n;viewportWidth<768?(document.querySelector(".intro").classList.remove("fixed"),introBtn.style.opacity="1",racoon.style.opacity="1",introText.forEach(function(e){e.style.transform="translate(0, 0)"})):(e=window.scrollY,t=.1*window.scrollY,n=1/(e/100+1),introText[0].style.transform="translate(".concat(14*t,"px)"),introText[1].style.transform="translate(".concat(-3*t,"px)"),introText[2].style.transform="translate(".concat(16*t,"px)"),introText[3].style.transform="translate(".concat(17*t,"px)"),introText[4].style.transform="translate(".concat(-9*t,"px)"),introText[5].style.transform="translate(".concat(17.5*t,"px)"),e>window.innerHeight?(intro.style.pointerEvents="none",intro.style.opacity="0"):(introBtn.style.opacity="".concat(n),racoon.style.opacity="".concat(n),intro.style.pointerEvents="all",intro.style.opacity="1"))},processesInfo=[{heading:"How do conversations go?",text:"We start by defining the service provided. If it is construction or design, we ask if there is any logo or business card. Then we ask about the content that should be on the site. Based on this, we create only the structure and price the project. Then we start designing.",button:"Consultation"},{heading:"What does the project presentation look like?",text:"After finishing the website project, we present it to you for evaluation. Then we accept all comments regarding color selection, section construction, etc. We also explain why certain elements must contain certain features. Later we apply all changes.",button:"Presentation"},{heading:"What is the approval stage?",text:"This is the step where you decide to accept or reject our services. If you commission us to create a website, we will tell you how long it will probably take us. Additionally, we will need detailed content that should finally be on your website.",button:"Approval"},{heading:"Project execution!",text:"Leave this step to us! We will immediately start creating your dream business card website. During this time, you can give us any additional information, and we will take it into account. After the work is finished, all that remains is to place it on hosting.",button:"Execution"}],processTitle=document.querySelector(".processes-content-title"),processText=document.querySelector(".processes-content-text"),processBtns=document.querySelectorAll(".processes-list-item"),chengeProcess=function(e){e=e.target;e.classList.contains("active")||(closeAllProcesses(),e.classList.toggle("active"),setContent())},closeAllProcesses=function(){processBtns.forEach(function(e){return e.classList.remove("active")})},setContent=function(){for(var e=0;e<processesInfo.length;e++)if(processBtns[e].classList.contains("active"))return processTitle.textContent=processesInfo[e].heading,void(processText.textContent=processesInfo[e].text)},prevSection=document.querySelector(".services"),nextSection=document.querySelector(".parallax-hero"),projectsParallaxHandler=function(){var e,t,n,o,a;viewportWidth<992?nextSection.style.transform="translate(0, 0)":(e=document.querySelector(".projects-desktop-cnt .projects-showcase"),t=document.querySelectorAll(".projects-desktop-cnt .project"),o=prevSection.offsetTop,a=document.querySelector(".projects .section__heading"),n=window.scrollY,o=o+prevSection.offsetHeight+a.offsetHeight+Math.floor(nav.offsetHeight/2),a=nextSection.offsetTop-window.innerHeight+Math.floor(nav.offsetHeight/2),n<o?e.style.transform="translate(0, Calc(-100% + ".concat(window.innerHeight,"px))"):a<n?e.style.transform="translate(0, ".concat((t.length-1)*window.innerHeight,"px)"):o<n&&(e.style.transform="translate(0, Calc(-100% + ".concat(window.innerHeight+2*(n-o),"px))")))},firstSection=document.querySelector(".processes"),secondSection=document.querySelector(".characteristics"),parallaxHero=document.querySelector(".parallax-hero"),handleParallaxSection=function(){var e,t;viewportWidth<992?(secondSection.style.transform="translate(0, 0)",parallaxHero.style.height="0"):(t=(e=parallaxHero.offsetTop-window.scrollY)+viewportWidth,parallaxHero.style.height="Calc(".concat(window.innerHeight+viewportWidth,"px - 5rem)"),t<=0?(firstSection.style.transform="translate(-".concat(viewportWidth,"px, 0)"),secondSection.style.transform="translate(0, ".concat(t,"px)")):e<=0?(firstSection.style.transform="translate(".concat(e,"px, 0)"),secondSection.style.transform="translate(Calc(100% + ".concat(e,"px), 0)")):(firstSection.style.transform="translate(0, ".concat(e,"px)"),secondSection.style.transform="translate(100%, ".concat(e,"px)")))},parallaxTexts=document.querySelectorAll(".characteristics-item"),handleParallaxItems=function(e){e.target.classList.contains("reset-pos")&&e.target.classList.remove("reset-pos"),e.target.classList.add("add-pos");var t=e.clientX,n=e.clientY,o=e.target.offsetWidth/2,e=e.target.offsetHeight/2,a=(o-t)/40,r=(e-n)/40;parallaxTexts.forEach(function(e){e.classList.contains("reset-pos")&&e.classList.remove("reset-pos"),e.classList.add("add-pos"),e.style.setProperty("--transform-y","".concat(r,"px")),e.style.setProperty("--transform-x","".concat(a,"px"))})};secondSection.addEventListener("mousemove",handleParallaxItems),secondSection.addEventListener("mouseout",function(){parallaxTexts.forEach(function(e){e.classList.add("reset-pos"),e.classList.remove("add-pos")})}),window.onload=function(){headerParallaxHandler(),viewportWidth<=768&&navHandler(),projectsParallaxHandler(),handleParallaxSection()},processBtns.forEach(function(e){return e.addEventListener("click",chengeProcess)}),window.addEventListener("click",function(e){cardOutsideHandler(e)}),window.addEventListener("scroll",function(){headerParallaxHandler(),projectsParallaxHandler(),handleParallaxSection()}),window.addEventListener("resize",function(){viewportWidth=window.innerWidth,headerParallaxHandler(),viewportWidth<=768&&navHandler(),992<=viewportWidth||(handleParallaxSection(),projectsParallaxHandler(),cardsActivatorHandler())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW50cm9UZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW50cm9CdG4iLCJxdWVyeVNlbGVjdG9yIiwicmFjb29uIiwiaW50cm8iLCJ3aW5kb3ciLCJ2aWV3cG9ydFdpZHRoIiwiY2FyZHNBY3RpdmF0b3JIYW5kbGVyIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibW5hdkl0ZW1zIiwiY2xvc2UiLCJidXJnZXJJY29uIiwib2xkQnVyZ2VySWNvbiIsImNsb25lTm9kZSIsInJlcGxhY2VXaXRoIiwib2xkTmF2TGlzdEJhY2tncm91bmQiLCJyZXZlYWwiLCJ0b2dnbGUiLCJuYXZiYXIiLCJvbGRJdGVtIiwiaGVhZGVyUGFyYWxsYXhIYW5kbGVyIiwiaXNFeHBhbmRlZCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIml0ZW0iLCJuYXZMaXN0QmFja2dyb3VuZCIsInRyYW5zZm9ybSIsInN0eWxlIiwib3BhY2l0eSIsInRleHQiLCJyYXRlIiwicG9pbnRlckV2ZW50cyIsImNvbmNhdCIsIm9wYWNpdHlWYWx1ZSIsIm9mZnNldFkiLCJpbm5lckhlaWdodCIsInByb2Nlc3Nlc0luZm8iLCJoZWFkaW5nIiwiYnV0dG9uIiwicHJvY2Vzc1RpdGxlIiwiY2hlbmdlUHJvY2VzcyIsImJ0biIsImNsb3NlQWxsUHJvY2Vzc2VzIiwicHJvY2Vzc0J0bnMiLCJlIiwidGFyZ2V0IiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJzZXRDb250ZW50IiwicHJldlNlY3Rpb24iLCJuZXh0U2VjdGlvbiIsImkiLCJwcm9jZXNzVGV4dCIsInByb2plY3RzU2hvd2Nhc2UiLCJzY3JvbGxWYWx1ZSIsImZpcnN0QW5jaG9yUG9pbnQiLCJwcm9qZWN0c1BhcmFsbGF4SGFuZGxlciIsInNlY29uZEFuY2hvclBvaW50IiwiZmlyc3RTZWN0aW9uIiwiaGFuZGxlUGFyYWxsYXhTZWN0aW9uIiwic2Vjb25kU2VjdGlvbiIsInBhcmFsbGF4SGVybyIsInNjcm9sbFkiLCJwcmV2U2VjdGlvbk9mZnNldCIsInNlY3Rpb25IZWFkaW5nIiwib2Zmc2V0SGVpZ2h0IiwiTWF0aCIsImZsb29yIiwibmF2Iiwib2Zmc2V0VG9wIiwic2Vjb25kQW5jaG9yIiwiaGVpZ2h0IiwiZmlyc3RBbmNob3IiLCJwYXJhbGxheFRleHRzIiwiaGFuZGxlUGFyYWxsYXhJdGVtcyIsImNsaWVudFkiLCJtaWRkbGVYIiwic2V0UHJvcGVydHkiLCJmaW5hbFgiLCJvbmxvYWQiLCJvZmZzZXRXaWR0aCIsIm5hdkhhbmRsZXIiLCJ4IiwieSIsImZpbmFsWSIsImNhcmRPdXRzaWRlSGFuZGxlciIsImlubmVyV2lkdGgiXSwibWFwcGluZ3MiOiJhQUFBLElBQU1BLFVBQVlDLFNBQVNDLGlCQUFpQixhQUFhLEVBQ25EQyxTQUFXRixTQUFTRyxjQUFjLFlBQVksRUFEOUNKLE9BQVNDLFNBQVdHLGNBQUNGLFNBQWlCLEVBQ3RDQyxNQUFRRixTQUFXRyxjQUFjLFFBQUMsRUFDbENDLElBQU1KLFNBQVdHLGNBQWMsU0FBQyxFQUNoQ0UsY0FBZ0JDLE9BQUNILFdBRW5CSSxNQUFBQSxTQUFnQkQsaUJBQWlCLHdCQUFBLEVBSS9CRSxzQkFBd0IsV0FDN0JDLE1BQUtDLFFBQVEsU0FBQ0MsR0FDYkEsRUFBQUEsaUJBQUtDLFFBQXdCLFdBQzVCSCxNQUFBQSxRQUFNQyxTQUFBQSxHQUNMRyxFQUFBQyxVQUFPQSxTQUFVQyxRQUFTLEdBQ3pCRixFQUFHQyxVQUFBQSxPQUFVRSxRQUFPLENBRXRCLENBQUMsRUFDREwsRUFBQUEsVUFBS0csSUFBVUcsUUFBSSxDQUNwQixDQUFDLEVBRUROLEVBQ0NGLGlCQUFjLFdBQVEsV0FBdEJBLE1BQ0NDLFFBQU9JLFNBQUFBLEdBQUhELEVBQ0hBLFVBQUdDLFNBQWlCLFFBQVEsR0FBNUJELEVBQ0RDLFVBQUFFLE9BQUEsUUFBQSxDQUNE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QSxVQUFBQSxJQUFBQSxXQUF1QixFQUN4QlMsRUFBSS9CLFVBQUFBLE9BQWlCLFNBQUssQ0E3QjFCLENBQUMsQ0FDRixDQUFDLEVBSURELE9BOEJDRSxPQUFBQSxXQUNBcUIsc0JBQUMsRUE3Qkd0QixlQUFpQixLQUNwQm1GLFdBQVcsRUFFWnpCLHdCQUF3QixFQUN4Qkcsc0JBQXNCLENBQ3ZCLEVBRUFoQixZQUFZMUMsUUFBUSxTQUFDd0MsR0FBRyxPQUFLQSxFQUFJdEMsaUJBQWlCLFFBQVNxQyxhQUFhLENBQUMsQ0FBQSxFQUV6RTNDLE9BQU9NLGlCQUFpQixRQUFTLFNBQUN5QyxHQUNqQ3lDLG1CQUFtQnpDLENBQUMsQ0FDckIsQ0FBQyxFQUVEL0MsT0FBT00saUJBQWlCLFNBQVUsV0FDakNpQixzQkFBc0IsRUFDdEJvQyx3QkFBd0IsRUFDeEJHLHNCQUFzQixDQUN2QixDQUFDLEVBRUQ5RCxPQUFPTSxpQkFBaUIsU0FBVSxXQUNqQ0wsY0FBZ0JELE9BQU95RixXQUN0QmxFLHNCQUFzQixFQUNuQnRCLGVBQWlCLEtBQ3BCbUYsV0FBVyxFQUVTLEtBQWpCbkYsZ0JBQ0g2RCxzQkFBc0IsRUFDdEJILHdCQUF3QixFQUN6QnpELHNCQUFzQixFQUN2QixDQUFDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW50cm9UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmludHJvLXRleHQnKTtcbmNvbnN0IGludHJvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvLWJ0bicpO1xuY29uc3QgcmFjb29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhY29vbicpO1xuY29uc3QgaW50cm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8nKTtcbmNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKTtcbmxldCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cbmNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2VzX19jYXJkcyAuY2FyZCcpO1xuXG5jb25zdCBjYXJkc0FjdGl2YXRvckhhbmRsZXIgPSAoKSA9PiB7XG5cdGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcblx0XHRjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0Y2FyZHMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0XHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRjYXJkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcdH0pO1xuXG5cdFx0Y2FyZC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcblx0XHRcdGNhcmRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG5jb25zdCBjYXJkT3V0c2lkZUhhbmRsZXIgPSAoZSkgPT4ge1xuXHRpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2FyZCcpKSB7XG5cdFx0Y2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuXHRcdFx0Y2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XHR9KTtcblx0fVxufTtcblxuY29uc3QgbmF2SGFuZGxlciA9ICgpID0+IHtcblx0Y29uc3QgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xuXHRjb25zdCBvbGRCdXJnZXJJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1pY29uJyk7XG5cdGNvbnN0IG1uYXZJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtbmF2IGEnKTtcblx0Y29uc3Qgb2xkTmF2TGlzdEJhY2tncm91bmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2LWxpc3QtYmFja2dyb3VuZCcpO1xuXHRjb25zdCByZXZlYWwgPSAoKSA9PiB7XG5cdFx0YnVyZ2VySWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcblx0XHRuYXZiYXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgbGV0IGlzRXhwYW5kZWQgPSBidXJnZXJJY29uLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpXG4gICAgaWYoaXNFeHBhbmRlZCA9PSAnZmFsc2UnKXtcbiAgICAgIGlzRXhwYW5kZWQgPSBmYWxzZVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlzRXhwYW5kZWQgPSB0cnVlXG4gICAgfVxuICAgIGJ1cmdlckljb24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgIWlzRXhwYW5kZWQpXG5cdH07XG5cdGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuXHRcdGJ1cmdlckljb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgYnVyZ2VySWNvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKVxuXHRcdG5hdmJhci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0fTtcblx0Y29uc3QgYnVyZ2VySWNvbiA9IG9sZEJ1cmdlckljb24uY2xvbmVOb2RlKHRydWUpO1xuXHRidXJnZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmV2ZWFsKTtcblx0b2xkQnVyZ2VySWNvbi5yZXBsYWNlV2l0aChidXJnZXJJY29uKTtcblx0bW5hdkl0ZW1zLmZvckVhY2goKG9sZEl0ZW0pID0+IHtcblx0XHRjb25zdCBpdGVtID0gb2xkSXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlKTtcblx0XHRvbGRJdGVtLnJlcGxhY2VXaXRoKGl0ZW0pO1xuXHR9KTtcblx0Y29uc3QgbmF2TGlzdEJhY2tncm91bmQgPSBvbGROYXZMaXN0QmFja2dyb3VuZC5jbG9uZU5vZGUoKTtcblx0bmF2TGlzdEJhY2tncm91bmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7XG5cdG9sZE5hdkxpc3RCYWNrZ3JvdW5kLnJlcGxhY2VXaXRoKG5hdkxpc3RCYWNrZ3JvdW5kKTtcbn07XG5cbmNvbnN0IGhlYWRlclBhcmFsbGF4SGFuZGxlciA9ICgpID0+IHtcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA3NjgpIHtcblx0XHRjb25zdCBpbnRybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnRybycpO1xuXHRcdGludHJvLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJyk7XG4gICAgaW50cm9CdG4uc3R5bGUub3BhY2l0eSA9ICcxJ1xuICAgIHJhY29vbi5zdHlsZS5vcGFjaXR5ID0gJzEnXG4gICAgaW50cm9UZXh0LmZvckVhY2godGV4dCA9PiB7XG4gICAgICB0ZXh0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXG4gICAgfSlcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCBvZmZzZXRZID0gd2luZG93LnNjcm9sbFk7XG5cdGNvbnN0IHJhdGUgPSB3aW5kb3cuc2Nyb2xsWSAqIDAuMTtcblx0Y29uc3Qgb3BhY2l0eVZhbHVlID0gMSAvIChvZmZzZXRZIC8gMTAwICsgMSk7XG5cblx0aW50cm9UZXh0WzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTR9cHgpYDtcblx0aW50cm9UZXh0WzFdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogLTN9cHgpYDtcblx0aW50cm9UZXh0WzJdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTZ9cHgpYDtcblx0aW50cm9UZXh0WzNdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTd9cHgpYDtcblx0aW50cm9UZXh0WzRdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogLTl9cHgpYDtcblx0aW50cm9UZXh0WzVdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTcuNX1weClgO1xuXG5cdGlmIChvZmZzZXRZID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG5cdFx0aW50cm8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcblx0XHRpbnRyby5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXHR9IGVsc2Uge1xuXHRcdGludHJvQnRuLnN0eWxlLm9wYWNpdHkgPSBgJHtvcGFjaXR5VmFsdWV9YDtcblx0XHRyYWNvb24uc3R5bGUub3BhY2l0eSA9IGAke29wYWNpdHlWYWx1ZX1gO1xuXHRcdGludHJvLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYWxsJztcblx0XHRpbnRyby5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuXHR9XG59O1xuXG4vLyBQcm9jZXNzZXMgLSBsaXN0XG5jb25zdCBwcm9jZXNzZXNJbmZvID0gW1xuXHR7XG5cdFx0aGVhZGluZzogJ0hvdyBkbyBjb252ZXJzYXRpb25zIGdvPycsXG5cdFx0dGV4dDogJ1dlIHN0YXJ0IGJ5IGRlZmluaW5nIHRoZSBzZXJ2aWNlIHByb3ZpZGVkLiBJZiBpdCBpcyBjb25zdHJ1Y3Rpb24gb3IgZGVzaWduLCB3ZSBhc2sgaWYgdGhlcmUgaXMgYW55IGxvZ28gb3IgYnVzaW5lc3MgY2FyZC4gVGhlbiB3ZSBhc2sgYWJvdXQgdGhlIGNvbnRlbnQgdGhhdCBzaG91bGQgYmUgb24gdGhlIHNpdGUuIEJhc2VkIG9uIHRoaXMsIHdlIGNyZWF0ZSBvbmx5IHRoZSBzdHJ1Y3R1cmUgYW5kIHByaWNlIHRoZSBwcm9qZWN0LiBUaGVuIHdlIHN0YXJ0IGRlc2lnbmluZy4nLFxuXHRcdGJ1dHRvbjogJ0NvbnN1bHRhdGlvbicsXG5cdH0sXG5cdHtcblx0XHRoZWFkaW5nOiAnV2hhdCBkb2VzIHRoZSBwcm9qZWN0IHByZXNlbnRhdGlvbiBsb29rIGxpa2U/Jyxcblx0XHR0ZXh0OiAnQWZ0ZXIgZmluaXNoaW5nIHRoZSB3ZWJzaXRlIHByb2plY3QsIHdlIHByZXNlbnQgaXQgdG8geW91IGZvciBldmFsdWF0aW9uLiBUaGVuIHdlIGFjY2VwdCBhbGwgY29tbWVudHMgcmVnYXJkaW5nIGNvbG9yIHNlbGVjdGlvbiwgc2VjdGlvbiBjb25zdHJ1Y3Rpb24sIGV0Yy4gV2UgYWxzbyBleHBsYWluIHdoeSBjZXJ0YWluIGVsZW1lbnRzIG11c3QgY29udGFpbiBjZXJ0YWluIGZlYXR1cmVzLiBMYXRlciB3ZSBhcHBseSBhbGwgY2hhbmdlcy4nLFxuXHRcdGJ1dHRvbjogJ1ByZXNlbnRhdGlvbicsXG5cdH0sXG5cdHtcblx0XHRoZWFkaW5nOiAnV2hhdCBpcyB0aGUgYXBwcm92YWwgc3RhZ2U/Jyxcblx0XHR0ZXh0OiAnVGhpcyBpcyB0aGUgc3RlcCB3aGVyZSB5b3UgZGVjaWRlIHRvIGFjY2VwdCBvciByZWplY3Qgb3VyIHNlcnZpY2VzLiBJZiB5b3UgY29tbWlzc2lvbiB1cyB0byBjcmVhdGUgYSB3ZWJzaXRlLCB3ZSB3aWxsIHRlbGwgeW91IGhvdyBsb25nIGl0IHdpbGwgcHJvYmFibHkgdGFrZSB1cy4gQWRkaXRpb25hbGx5LCB3ZSB3aWxsIG5lZWQgZGV0YWlsZWQgY29udGVudCB0aGF0IHNob3VsZCBmaW5hbGx5IGJlIG9uIHlvdXIgd2Vic2l0ZS4nLFxuXHRcdGJ1dHRvbjogJ0FwcHJvdmFsJyxcblx0fSxcblx0e1xuXHRcdGhlYWRpbmc6ICdQcm9qZWN0IGV4ZWN1dGlvbiEnLFxuXHRcdHRleHQ6ICdMZWF2ZSB0aGlzIHN0ZXAgdG8gdXMhIFdlIHdpbGwgaW1tZWRpYXRlbHkgc3RhcnQgY3JlYXRpbmcgeW91ciBkcmVhbSBidXNpbmVzcyBjYXJkIHdlYnNpdGUuIER1cmluZyB0aGlzIHRpbWUsIHlvdSBjYW4gZ2l2ZSB1cyBhbnkgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiwgYW5kIHdlIHdpbGwgdGFrZSBpdCBpbnRvIGFjY291bnQuIEFmdGVyIHRoZSB3b3JrIGlzIGZpbmlzaGVkLCBhbGwgdGhhdCByZW1haW5zIGlzIHRvIHBsYWNlIGl0IG9uIGhvc3RpbmcuJyxcblx0XHRidXR0b246ICdFeGVjdXRpb24nLFxuXHR9LFxuXTtcbmNvbnN0IHByb2Nlc3NUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzZXMtY29udGVudC10aXRsZScpO1xuY29uc3QgcHJvY2Vzc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvY2Vzc2VzLWNvbnRlbnQtdGV4dCcpO1xuY29uc3QgcHJvY2Vzc0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvY2Vzc2VzLWxpc3QtaXRlbScpO1xuY29uc3QgY2hlbmdlUHJvY2VzcyA9IChlKSA9PiB7XG5cdGNvbnN0IGJ0biA9IGUudGFyZ2V0O1xuXG5cdGlmIChidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHRcdHJldHVybjtcblx0fSBlbHNlIHtcblx0XHRjbG9zZUFsbFByb2Nlc3NlcygpO1xuXHRcdGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcblx0fVxuXHRzZXRDb250ZW50KCk7XG59O1xuXG5jb25zdCBjbG9zZUFsbFByb2Nlc3NlcyA9ICgpID0+IHtcblx0cHJvY2Vzc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xufTtcblxuY29uc3Qgc2V0Q29udGVudCA9ICgpID0+IHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwcm9jZXNzZXNJbmZvLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKHByb2Nlc3NCdG5zW2ldLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0XHRcdHByb2Nlc3NUaXRsZS50ZXh0Q29udGVudCA9IHByb2Nlc3Nlc0luZm9baV0uaGVhZGluZztcblx0XHRcdHByb2Nlc3NUZXh0LnRleHRDb250ZW50ID0gcHJvY2Vzc2VzSW5mb1tpXS50ZXh0O1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxufTtcblxuLyogUFJPSkVDVFMgUEFSQUxMQVggKi9cbmNvbnN0IHByZXZTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2VzJyk7XG5jb25zdCBuZXh0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJhbGxheC1oZXJvJyk7XG5jb25zdCBwcm9qZWN0c1BhcmFsbGF4SGFuZGxlciA9ICgpID0+IHtcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA5OTIpe1xuICAgIG5leHRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXG4gICAgcmV0dXJuIFxuICB9XG4gIGNvbnN0IHByb2plY3RzU2hvd2Nhc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMtZGVza3RvcC1jbnQgLnByb2plY3RzLXNob3djYXNlJyk7XG4gIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RzLWRlc2t0b3AtY250IC5wcm9qZWN0JylcbiAgbGV0IHByZXZTZWN0aW9uT2Zmc2V0ID0gcHJldlNlY3Rpb24ub2Zmc2V0VG9wO1xuXHRjb25zdCBzZWN0aW9uSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cyAuc2VjdGlvbl9faGVhZGluZycpO1xuICBjb25zdCBzY3JvbGxWYWx1ZSA9IHdpbmRvdy5zY3JvbGxZXG5cdGxldCBmaXJzdEFuY2hvclBvaW50ID1cblx0XHRwcmV2U2VjdGlvbk9mZnNldCArXG5cdFx0cHJldlNlY3Rpb24ub2Zmc2V0SGVpZ2h0ICtcblx0XHRzZWN0aW9uSGVhZGluZy5vZmZzZXRIZWlnaHQgK1xuICAgIE1hdGguZmxvb3IobmF2Lm9mZnNldEhlaWdodCAvIDIpXG5cdGxldCBzZWNvbmRBbmNob3JQb2ludCA9IG5leHRTZWN0aW9uLm9mZnNldFRvcCAtIHdpbmRvdy5pbm5lckhlaWdodCArIE1hdGguZmxvb3IobmF2Lm9mZnNldEhlaWdodCAvIDIpXG4gIGlmIChzY3JvbGxWYWx1ZSA8IGZpcnN0QW5jaG9yUG9pbnQpIHtcbiAgICBwcm9qZWN0c1Nob3djYXNlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgQ2FsYygtMTAwJSArICR7d2luZG93LmlubmVySGVpZ2h0fXB4KSlgXG4gIH1cbiAgZWxzZSBpZiAoc2Nyb2xsVmFsdWUgPiBzZWNvbmRBbmNob3JQb2ludCl7XG4gICAgcHJvamVjdHNTaG93Y2FzZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7KHByb2plY3RzLmxlbmd0aCAtIDEpICogd2luZG93LmlubmVySGVpZ2h0fXB4KWBcbiAgfVxuICBlbHNlIGlmIChzY3JvbGxWYWx1ZSA+IGZpcnN0QW5jaG9yUG9pbnQpIHtcbiAgICBwcm9qZWN0c1Nob3djYXNlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgQ2FsYygtMTAwJSArICR7d2luZG93LmlubmVySGVpZ2h0ICsgKHNjcm9sbFZhbHVlIC0gZmlyc3RBbmNob3JQb2ludCkgKiAyfXB4KSlgXG4gIH1cbn1cblxuY29uc3QgZmlyc3RTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2Nlc3NlcycpO1xuY29uc3Qgc2Vjb25kU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFyYWN0ZXJpc3RpY3MnKTtcbmNvbnN0IHBhcmFsbGF4SGVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJhbGxheC1oZXJvJyk7XG5cbmNvbnN0IGhhbmRsZVBhcmFsbGF4U2VjdGlvbiA9ICgpID0+IHtcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA5OTIpe1xuICAgIHNlY29uZFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSdcbiAgICBwYXJhbGxheEhlcm8uc3R5bGUuaGVpZ2h0ID0gJzAnXG4gICAgcmV0dXJuXG4gIH0gIFxuICBjb25zdCBmaXJzdEFuY2hvciA9IHBhcmFsbGF4SGVyby5vZmZzZXRUb3AgLSB3aW5kb3cuc2Nyb2xsWVxuICBjb25zdCBzZWNvbmRBbmNob3IgPSBmaXJzdEFuY2hvciArIHZpZXdwb3J0V2lkdGhcbiAgcGFyYWxsYXhIZXJvLnN0eWxlLmhlaWdodCA9IGBDYWxjKCR7d2luZG93LmlubmVySGVpZ2h0ICsgdmlld3BvcnRXaWR0aH1weCAtIDVyZW0pYFxuICBpZihzZWNvbmRBbmNob3IgPD0gMCkge1xuICAgIGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC0ke3ZpZXdwb3J0V2lkdGh9cHgsIDApYFxuICAgIHNlY29uZFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgwLCAke3NlY29uZEFuY2hvcn1weClgXG4gIH1cbiAgZWxzZSBpZihmaXJzdEFuY2hvciA8PSAwKSB7XG4gICAgZmlyc3RTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtmaXJzdEFuY2hvcn1weCwgMClgXG4gICAgc2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSAgYHRyYW5zbGF0ZShDYWxjKDEwMCUgKyAke2ZpcnN0QW5jaG9yfXB4KSwgMClgXG4gIH1cbiAgZWxzZSB7XG4gICAgZmlyc3RTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgJHtmaXJzdEFuY2hvcn1weClgXG4gICAgc2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDEwMCUsICR7Zmlyc3RBbmNob3J9cHgpYFxuICB9XG59O1xuXG4vLyBwYXJhbGxheCBJdGVtc1xuXG5jb25zdCBwYXJhbGxheFRleHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3RlcmlzdGljcy1pdGVtJyk7XG5jb25zdCBoYW5kbGVQYXJhbGxheEl0ZW1zID0gKGUpID0+IHtcblx0aWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncmVzZXQtcG9zJykpIHtcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdyZXNldC1wb3MnKTtcblx0fVxuXHRlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhZGQtcG9zJyk7XG5cblx0bGV0IHggPSBlLmNsaWVudFg7XG5cdGxldCB5ID0gZS5jbGllbnRZO1xuXHRjb25zdCBtaWRkbGVYID0gZS50YXJnZXQub2Zmc2V0V2lkdGggLyAyO1xuXHRjb25zdCBtaWRkbGVZID0gZS50YXJnZXQub2Zmc2V0SGVpZ2h0IC8gMjtcblx0bGV0IGZpbmFsWCA9IChtaWRkbGVYIC0geCkgLyA0MDtcblx0bGV0IGZpbmFsWSA9IChtaWRkbGVZIC0geSkgLyA0MDtcblxuXHRwYXJhbGxheFRleHRzLmZvckVhY2goKHRleHQpID0+IHtcblx0XHRpZiAodGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XG5cdFx0XHR0ZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ3Jlc2V0LXBvcycpO1xuXHRcdH1cblx0XHR0ZXh0LmNsYXNzTGlzdC5hZGQoJ2FkZC1wb3MnKTtcblxuXHRcdHRleHQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdHJhbnNmb3JtLXknLCBgJHtmaW5hbFl9cHhgKTtcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS14JywgYCR7ZmluYWxYfXB4YCk7XG5cdH0pO1xufTtcblxuc2Vjb25kU2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVQYXJhbGxheEl0ZW1zKTtcbnNlY29uZFNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoKSA9PiB7XG5cdHBhcmFsbGF4VGV4dHMuZm9yRWFjaCgodGV4dCkgPT4ge1xuXHRcdHRleHQuY2xhc3NMaXN0LmFkZCgncmVzZXQtcG9zJyk7XG5cdFx0dGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdhZGQtcG9zJyk7XG5cdH0pO1xufSk7XG5cbi8vIGZ1bmN0aW9ucyBhY3Rpb25zXG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpO1xuXHRpZiAodmlld3BvcnRXaWR0aCA8PSA3NjgpIHtcblx0XHRuYXZIYW5kbGVyKCk7XG5cdH1cblx0cHJvamVjdHNQYXJhbGxheEhhbmRsZXIoKTtcblx0aGFuZGxlUGFyYWxsYXhTZWN0aW9uKCk7XG59O1xuXG5wcm9jZXNzQnRucy5mb3JFYWNoKChidG4pID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZW5nZVByb2Nlc3MpKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0Y2FyZE91dHNpZGVIYW5kbGVyKGUpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpO1xuXHRwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpO1xuXHRoYW5kbGVQYXJhbGxheFNlY3Rpb24oKTtcbn0pO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuXHR2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGhlYWRlclBhcmFsbGF4SGFuZGxlcigpXG5cdGlmICh2aWV3cG9ydFdpZHRoIDw9IDc2OCkge1xuXHRcdG5hdkhhbmRsZXIoKTtcblx0fVxuXHRpZiAodmlld3BvcnRXaWR0aCA+PSA5OTIpIHJldHVybjtcbiAgaGFuZGxlUGFyYWxsYXhTZWN0aW9uKCk7XG4gIHByb2plY3RzUGFyYWxsYXhIYW5kbGVyKClcblx0Y2FyZHNBY3RpdmF0b3JIYW5kbGVyKCk7XG59KTtcbiJdfQ==
