"use strict";var introText=document.querySelectorAll(".intro-text"),introBtn=document.querySelector(".intro-btn"),racoon=document.querySelector(".racoon"),intro=document.querySelector(".intro"),nav=document.querySelector(".navbar"),viewportWidth=window.innerWidth,cards=document.querySelectorAll(".services__cards .card"),cardsActivatorHandler=function(){cards.forEach(function(e){e.addEventListener("click",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}),e.addEventListener("touchend",function(){cards.forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")})})},cardOutsideHandler=function(e){e.target.classList.contains("card")||cards.forEach(function(e){e.classList.remove("active")})},navHandler=function(){function n(){r.classList.remove("active"),r.setAttribute("aria-expanded","false"),t.classList.remove("active")}var t=document.querySelector(".navbar"),e=document.querySelector(".burger-icon"),o=document.querySelectorAll(".mobile-nav a"),a=document.querySelector(".nav-list-background"),r=e.cloneNode(!0),e=(r.addEventListener("click",function(){r.classList.toggle("active"),t.classList.toggle("active");var e="false"!=(e=r.getAttribute("aria-expanded"));r.setAttribute("aria-expanded",!e)}),e.replaceWith(r),o.forEach(function(e){var t=e.cloneNode(!0);t.addEventListener("click",n),e.replaceWith(t)}),a.cloneNode());e.addEventListener("click",n),a.replaceWith(e)},headerParallaxHandler=function(){var e,t,n;viewportWidth<768?(document.querySelector(".intro").classList.remove("fixed"),introBtn.style.opacity="1",racoon.style.opacity="1",introText.forEach(function(e){e.style.transform="translate(0, 0)"})):(e=window.scrollY,t=.1*window.scrollY,n=1/(e/100+1),introText[0].style.transform="translate(".concat(14*t,"px)"),introText[1].style.transform="translate(".concat(-3*t,"px)"),introText[2].style.transform="translate(".concat(16*t,"px)"),introText[3].style.transform="translate(".concat(17*t,"px)"),introText[4].style.transform="translate(".concat(-9*t,"px)"),introText[5].style.transform="translate(".concat(17.5*t,"px)"),e>window.innerHeight?(intro.style.pointerEvents="none",intro.style.opacity="0"):(introBtn.style.opacity="".concat(n),racoon.style.opacity="".concat(n),intro.style.pointerEvents="all",intro.style.opacity="1"))},processesInfo=[{heading:"How do conversations go?",text:"We start by defining the service provided. If it is construction or design, we ask if there is any logo or business card. Then we ask about the content that should be on the site. Based on this, we create only the structure and price the project. Then we start designing.",button:"Consultation"},{heading:"What does the project presentation look like?",text:"After finishing the website project, we present it to you for evaluation. Then we accept all comments regarding color selection, section construction, etc. We also explain why certain elements must contain certain features. Later we apply all changes.",button:"Presentation"},{heading:"What is the approval stage?",text:"This is the step where you decide to accept or reject our services. If you commission us to create a website, we will tell you how long it will probably take us. Additionally, we will need detailed content that should finally be on your website.",button:"Approval"},{heading:"Project execution!",text:"Leave this step to us! We will immediately start creating your dream business card website. During this time, you can give us any additional information, and we will take it into account. After the work is finished, all that remains is to place it on hosting.",button:"Execution"}],processTitle=document.querySelector(".processes-content-title"),processText=document.querySelector(".processes-content-text"),processBtns=document.querySelectorAll(".processes-list-item"),chengeProcess=function(e){e=e.target;e.classList.contains("active")||(closeAllProcesses(),e.classList.toggle("active"),setContent())},closeAllProcesses=function(){processBtns.forEach(function(e){return e.classList.remove("active")})},setContent=function(){for(var e=0;e<processesInfo.length;e++)if(processBtns[e].classList.contains("active"))return processTitle.textContent=processesInfo[e].heading,void(processText.textContent=processesInfo[e].text)},prevSection=document.querySelector(".services"),nextSection=document.querySelector(".parallax-hero"),projectsParallaxHandler=function(){var e,t,n,o,a;viewportWidth<992?nextSection.style.transform="translate(0, 0)":(e=document.querySelector(".projects-desktop-cnt .projects-showcase"),t=document.querySelectorAll(".projects-desktop-cnt .project"),o=prevSection.offsetTop,a=document.querySelector(".projects .section__heading"),n=window.scrollY,o=o+prevSection.offsetHeight+a.offsetHeight+Math.floor(nav.offsetHeight/2),a=nextSection.offsetTop-window.innerHeight+Math.floor(nav.offsetHeight/2),n<o?e.style.transform="translate(0, Calc(-100% + ".concat(window.innerHeight,"px))"):a<n?e.style.transform="translate(0, ".concat((t.length-1)*window.innerHeight,"px)"):o<n&&(e.style.transform="translate(0, Calc(-100% + ".concat(window.innerHeight+2*(n-o),"px))")))},firstSection=document.querySelector(".processes"),secondSection=document.querySelector(".characteristics"),parallaxHero=document.querySelector(".parallax-hero"),handleParallaxSection=function(){var e,t;viewportWidth<992?(secondSection.style.transform="translate(0, 0)",parallaxHero.style.height="0"):(t=(e=parallaxHero.offsetTop-window.scrollY)+viewportWidth,parallaxHero.style.height="Calc(".concat(window.innerHeight+viewportWidth,"px - 5rem)"),t<=0?(firstSection.style.transform="translate(-".concat(viewportWidth,"px, 0)"),secondSection.style.transform="translate(0, ".concat(t,"px)")):e<=0?(firstSection.style.transform="translate(".concat(e,"px, 0)"),secondSection.style.transform="translate(Calc(100% + ".concat(e,"px), 0)")):(firstSection.style.transform="translate(0, ".concat(e,"px)"),secondSection.style.transform="translate(100%, ".concat(e,"px)")))},parallaxTexts=document.querySelectorAll(".characteristics-item"),handleParallaxItems=function(e){e.target.classList.contains("reset-pos")&&e.target.classList.remove("reset-pos"),e.target.classList.add("add-pos");var t=e.clientX,n=e.clientY,o=e.target.offsetWidth/2,e=e.target.offsetHeight/2,a=(o-t)/40,r=(e-n)/40;parallaxTexts.forEach(function(e){e.classList.contains("reset-pos")&&e.classList.remove("reset-pos"),e.classList.add("add-pos"),e.style.setProperty("--transform-y","".concat(r,"px")),e.style.setProperty("--transform-x","".concat(a,"px"))})};secondSection.addEventListener("mousemove",handleParallaxItems),secondSection.addEventListener("mouseout",function(){parallaxTexts.forEach(function(e){e.classList.add("reset-pos"),e.classList.remove("add-pos")})}),window.onload=function(){headerParallaxHandler(),viewportWidth<=768&&navHandler(),projectsParallaxHandler(),handleParallaxSection()},processBtns.forEach(function(e){return e.addEventListener("click",chengeProcess)}),window.addEventListener("click",function(e){cardOutsideHandler(e)}),window.addEventListener("scroll",function(){headerParallaxHandler(),projectsParallaxHandler(),handleParallaxSection()}),window.addEventListener("resize",function(){viewportWidth=window.innerWidth,headerParallaxHandler(),viewportWidth<=768&&navHandler(),992<=viewportWidth||(handleParallaxSection(),projectsParallaxHandler(),cardsActivatorHandler())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaW50cm9UZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW50cm9CdG4iLCJxdWVyeVNlbGVjdG9yIiwicmFjb29uIiwiaW50cm8iLCJ3aW5kb3ciLCJ2aWV3cG9ydFdpZHRoIiwiY2FyZHNBY3RpdmF0b3JIYW5kbGVyIiwiY2FyZHMiLCJmb3JFYWNoIiwiY2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibW5hdkl0ZW1zIiwiY2xvc2UiLCJidXJnZXJJY29uIiwib2xkQnVyZ2VySWNvbiIsImNsb25lTm9kZSIsInJlcGxhY2VXaXRoIiwib2xkTmF2TGlzdEJhY2tncm91bmQiLCJyZXZlYWwiLCJ0b2dnbGUiLCJuYXZiYXIiLCJvbGRJdGVtIiwiaGVhZGVyUGFyYWxsYXhIYW5kbGVyIiwiaXNFeHBhbmRlZCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIml0ZW0iLCJuYXZMaXN0QmFja2dyb3VuZCIsInRyYW5zZm9ybSIsInN0eWxlIiwib3BhY2l0eSIsInRleHQiLCJyYXRlIiwicG9pbnRlckV2ZW50cyIsImNvbmNhdCIsIm9wYWNpdHlWYWx1ZSIsIm9mZnNldFkiLCJpbm5lckhlaWdodCIsInByb2Nlc3Nlc0luZm8iLCJoZWFkaW5nIiwiYnV0dG9uIiwicHJvY2Vzc1RpdGxlIiwiY2hlbmdlUHJvY2VzcyIsImJ0biIsImNsb3NlQWxsUHJvY2Vzc2VzIiwicHJvY2Vzc0J0bnMiLCJlIiwidGFyZ2V0IiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJzZXRDb250ZW50IiwicHJldlNlY3Rpb24iLCJuZXh0U2VjdGlvbiIsImkiLCJwcm9jZXNzVGV4dCIsInByb2plY3RzU2hvd2Nhc2UiLCJzY3JvbGxWYWx1ZSIsImZpcnN0QW5jaG9yUG9pbnQiLCJwcm9qZWN0c1BhcmFsbGF4SGFuZGxlciIsInNlY29uZEFuY2hvclBvaW50IiwiZmlyc3RTZWN0aW9uIiwiaGFuZGxlUGFyYWxsYXhTZWN0aW9uIiwic2Vjb25kU2VjdGlvbiIsInBhcmFsbGF4SGVybyIsInNjcm9sbFkiLCJwcmV2U2VjdGlvbk9mZnNldCIsInNlY3Rpb25IZWFkaW5nIiwib2Zmc2V0SGVpZ2h0IiwiTWF0aCIsImZsb29yIiwibmF2Iiwib2Zmc2V0VG9wIiwic2Vjb25kQW5jaG9yIiwiaGVpZ2h0IiwiZmlyc3RBbmNob3IiLCJwYXJhbGxheFRleHRzIiwiaGFuZGxlUGFyYWxsYXhJdGVtcyIsImNsaWVudFkiLCJtaWRkbGVYIiwic2V0UHJvcGVydHkiLCJmaW5hbFgiLCJvbmxvYWQiLCJvZmZzZXRXaWR0aCIsIm5hdkhhbmRsZXIiLCJ4IiwieSIsImZpbmFsWSIsImNhcmRPdXRzaWRlSGFuZGxlciIsImlubmVyV2lkdGgiXSwibWFwcGluZ3MiOiJhQUFBLElBQU1BLFVBQVlDLFNBQVNDLGlCQUFpQixhQUFhLEVBQ25EQyxTQUFXRixTQUFTRyxjQUFjLFlBQVksRUFEOUNKLE9BQVNDLFNBQVdHLGNBQUNGLFNBQWlCLEVBQ3RDQyxNQUFRRixTQUFXRyxjQUFjLFFBQUMsRUFDbENDLElBQU1KLFNBQVdHLGNBQWMsU0FBQyxFQUNoQ0UsY0FBZ0JDLE9BQUNILFdBRW5CSSxNQUFBQSxTQUFnQkQsaUJBQWlCLHdCQUFBLEVBSS9CRSxzQkFBd0IsV0FDN0JDLE1BQUtDLFFBQVEsU0FBQ0MsR0FDYkEsRUFBQUEsaUJBQUtDLFFBQXdCLFdBQzVCSCxNQUFBQSxRQUFNQyxTQUFBQSxHQUNMRyxFQUFBQyxVQUFPQSxTQUFVQyxRQUFTLEdBQ3pCRixFQUFHQyxVQUFBQSxPQUFVRSxRQUFPLENBRXRCLENBQUMsRUFDREwsRUFBQUEsVUFBS0csSUFBVUcsUUFBSSxDQUNwQixDQUFDLEVBRUROLEVBQ0NGLGlCQUFjLFdBQVEsV0FBdEJBLE1BQ0NDLFFBQU9JLFNBQUFBLEdBQUhELEVBQ0hBLFVBQUdDLFNBQWlCLFFBQVEsR0FBNUJELEVBQ0RDLFVBQUFFLE9BQUEsUUFBQSxDQUNE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QSxVQUFBQSxJQUFBQSxXQUF1QixFQUN4QlMsRUFBSS9CLFVBQUFBLE9BQWlCLFNBQUssQ0E3QjFCLENBQUMsQ0FDRixDQUFDLEVBSURELE9BOEJDRSxPQUFBQSxXQUNBcUIsc0JBQUMsRUE3Qkd0QixlQUFpQixLQUNwQm1GLFdBQVcsRUFFWnpCLHdCQUF3QixFQUN4Qkcsc0JBQXNCLENBQ3ZCLEVBRUFoQixZQUFZMUMsUUFBUSxTQUFDd0MsR0FBRyxPQUFLQSxFQUFJdEMsaUJBQWlCLFFBQVNxQyxhQUFhLENBQUMsQ0FBQSxFQUV6RTNDLE9BQU9NLGlCQUFpQixRQUFTLFNBQUN5QyxHQUNqQ3lDLG1CQUFtQnpDLENBQUMsQ0FDckIsQ0FBQyxFQUVEL0MsT0FBT00saUJBQWlCLFNBQVUsV0FDakNpQixzQkFBc0IsRUFDdEJvQyx3QkFBd0IsRUFDeEJHLHNCQUFzQixDQUN2QixDQUFDLEVBRUQ5RCxPQUFPTSxpQkFBaUIsU0FBVSxXQUNqQ0wsY0FBZ0JELE9BQU95RixXQUN0QmxFLHNCQUFzQixFQUNuQnRCLGVBQWlCLEtBQ3BCbUYsV0FBVyxFQUVTLEtBQWpCbkYsZ0JBQ0g2RCxzQkFBc0IsRUFDdEJILHdCQUF3QixFQUN6QnpELHNCQUFzQixFQUN2QixDQUFDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW50cm9UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmludHJvLXRleHQnKTtcclxuY29uc3QgaW50cm9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8tYnRuJyk7XHJcbmNvbnN0IHJhY29vbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYWNvb24nKTtcclxuY29uc3QgaW50cm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm8nKTtcclxuY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xyXG5sZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VydmljZXNfX2NhcmRzIC5jYXJkJyk7XHJcblxyXG5jb25zdCBjYXJkc0FjdGl2YXRvckhhbmRsZXIgPSAoKSA9PiB7XHJcblx0Y2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG5cdFx0Y2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y2FyZHMuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRcdFx0XHRpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNhcmQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XHJcblx0XHRcdGNhcmRzLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRcdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdGNhcmQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRPdXRzaWRlSGFuZGxlciA9IChlKSA9PiB7XHJcblx0aWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQnKSkge1xyXG5cdFx0Y2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG5cdFx0XHRjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgbmF2SGFuZGxlciA9ICgpID0+IHtcclxuXHRjb25zdCBuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XHJcblx0Y29uc3Qgb2xkQnVyZ2VySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItaWNvbicpO1xyXG5cdGNvbnN0IG1uYXZJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtbmF2IGEnKTtcclxuXHRjb25zdCBvbGROYXZMaXN0QmFja2dyb3VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtbGlzdC1iYWNrZ3JvdW5kJyk7XHJcblx0Y29uc3QgcmV2ZWFsID0gKCkgPT4ge1xyXG5cdFx0YnVyZ2VySWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuXHRcdG5hdmJhci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgIGxldCBpc0V4cGFuZGVkID0gYnVyZ2VySWNvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKVxyXG4gICAgaWYoaXNFeHBhbmRlZCA9PSAnZmFsc2UnKXtcclxuICAgICAgaXNFeHBhbmRlZCA9IGZhbHNlXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaXNFeHBhbmRlZCA9IHRydWVcclxuICAgIH1cclxuICAgIGJ1cmdlckljb24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgIWlzRXhwYW5kZWQpXHJcblx0fTtcclxuXHRjb25zdCBjbG9zZSA9ICgpID0+IHtcclxuXHRcdGJ1cmdlckljb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICBidXJnZXJJY29uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpXHJcblx0XHRuYXZiYXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0fTtcclxuXHRjb25zdCBidXJnZXJJY29uID0gb2xkQnVyZ2VySWNvbi5jbG9uZU5vZGUodHJ1ZSk7XHJcblx0YnVyZ2VySWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJldmVhbCk7XHJcblx0b2xkQnVyZ2VySWNvbi5yZXBsYWNlV2l0aChidXJnZXJJY29uKTtcclxuXHRtbmF2SXRlbXMuZm9yRWFjaCgob2xkSXRlbSkgPT4ge1xyXG5cdFx0Y29uc3QgaXRlbSA9IG9sZEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0aXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlKTtcclxuXHRcdG9sZEl0ZW0ucmVwbGFjZVdpdGgoaXRlbSk7XHJcblx0fSk7XHJcblx0Y29uc3QgbmF2TGlzdEJhY2tncm91bmQgPSBvbGROYXZMaXN0QmFja2dyb3VuZC5jbG9uZU5vZGUoKTtcclxuXHRuYXZMaXN0QmFja2dyb3VuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlKTtcclxuXHRvbGROYXZMaXN0QmFja2dyb3VuZC5yZXBsYWNlV2l0aChuYXZMaXN0QmFja2dyb3VuZCk7XHJcbn07XHJcblxyXG5jb25zdCBoZWFkZXJQYXJhbGxheEhhbmRsZXIgPSAoKSA9PiB7XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA3NjgpIHtcclxuXHRcdGNvbnN0IGludHJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvJyk7XHJcblx0XHRpbnRyby5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZCcpO1xyXG4gICAgaW50cm9CdG4uc3R5bGUub3BhY2l0eSA9ICcxJ1xyXG4gICAgcmFjb29uLnN0eWxlLm9wYWNpdHkgPSAnMSdcclxuICAgIGludHJvVGV4dC5mb3JFYWNoKHRleHQgPT4ge1xyXG4gICAgICB0ZXh0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXHJcbiAgICB9KVxyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3Qgb2Zmc2V0WSA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cdGNvbnN0IHJhdGUgPSB3aW5kb3cuc2Nyb2xsWSAqIDAuMTtcclxuXHRjb25zdCBvcGFjaXR5VmFsdWUgPSAxIC8gKG9mZnNldFkgLyAxMDAgKyAxKTtcclxuXHJcblx0aW50cm9UZXh0WzBdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTR9cHgpYDtcclxuXHRpbnRyb1RleHRbMV0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAtM31weClgO1xyXG5cdGludHJvVGV4dFsyXS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIDE2fXB4KWA7XHJcblx0aW50cm9UZXh0WzNdLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYXRlICogMTd9cHgpYDtcclxuXHRpbnRyb1RleHRbNF0uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3JhdGUgKiAtOX1weClgO1xyXG5cdGludHJvVGV4dFs1XS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7cmF0ZSAqIDE3LjV9cHgpYDtcclxuXHJcblx0aWYgKG9mZnNldFkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcclxuXHRcdGludHJvLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcblx0XHRpbnRyby5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRpbnRyb0J0bi5zdHlsZS5vcGFjaXR5ID0gYCR7b3BhY2l0eVZhbHVlfWA7XHJcblx0XHRyYWNvb24uc3R5bGUub3BhY2l0eSA9IGAke29wYWNpdHlWYWx1ZX1gO1xyXG5cdFx0aW50cm8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhbGwnO1xyXG5cdFx0aW50cm8uc3R5bGUub3BhY2l0eSA9ICcxJztcclxuXHR9XHJcbn07XHJcblxyXG4vLyBQcm9jZXNzZXMgLSBsaXN0XHJcbmNvbnN0IHByb2Nlc3Nlc0luZm8gPSBbXHJcblx0e1xyXG5cdFx0aGVhZGluZzogJ0hvdyBkbyBjb252ZXJzYXRpb25zIGdvPycsXHJcblx0XHR0ZXh0OiAnV2Ugc3RhcnQgYnkgZGVmaW5pbmcgdGhlIHNlcnZpY2UgcHJvdmlkZWQuIElmIGl0IGlzIGNvbnN0cnVjdGlvbiBvciBkZXNpZ24sIHdlIGFzayBpZiB0aGVyZSBpcyBhbnkgbG9nbyBvciBidXNpbmVzcyBjYXJkLiBUaGVuIHdlIGFzayBhYm91dCB0aGUgY29udGVudCB0aGF0IHNob3VsZCBiZSBvbiB0aGUgc2l0ZS4gQmFzZWQgb24gdGhpcywgd2UgY3JlYXRlIG9ubHkgdGhlIHN0cnVjdHVyZSBhbmQgcHJpY2UgdGhlIHByb2plY3QuIFRoZW4gd2Ugc3RhcnQgZGVzaWduaW5nLicsXHJcblx0XHRidXR0b246ICdDb25zdWx0YXRpb24nLFxyXG5cdH0sXHJcblx0e1xyXG5cdFx0aGVhZGluZzogJ1doYXQgZG9lcyB0aGUgcHJvamVjdCBwcmVzZW50YXRpb24gbG9vayBsaWtlPycsXHJcblx0XHR0ZXh0OiAnQWZ0ZXIgZmluaXNoaW5nIHRoZSB3ZWJzaXRlIHByb2plY3QsIHdlIHByZXNlbnQgaXQgdG8geW91IGZvciBldmFsdWF0aW9uLiBUaGVuIHdlIGFjY2VwdCBhbGwgY29tbWVudHMgcmVnYXJkaW5nIGNvbG9yIHNlbGVjdGlvbiwgc2VjdGlvbiBjb25zdHJ1Y3Rpb24sIGV0Yy4gV2UgYWxzbyBleHBsYWluIHdoeSBjZXJ0YWluIGVsZW1lbnRzIG11c3QgY29udGFpbiBjZXJ0YWluIGZlYXR1cmVzLiBMYXRlciB3ZSBhcHBseSBhbGwgY2hhbmdlcy4nLFxyXG5cdFx0YnV0dG9uOiAnUHJlc2VudGF0aW9uJyxcclxuXHR9LFxyXG5cdHtcclxuXHRcdGhlYWRpbmc6ICdXaGF0IGlzIHRoZSBhcHByb3ZhbCBzdGFnZT8nLFxyXG5cdFx0dGV4dDogJ1RoaXMgaXMgdGhlIHN0ZXAgd2hlcmUgeW91IGRlY2lkZSB0byBhY2NlcHQgb3IgcmVqZWN0IG91ciBzZXJ2aWNlcy4gSWYgeW91IGNvbW1pc3Npb24gdXMgdG8gY3JlYXRlIGEgd2Vic2l0ZSwgd2Ugd2lsbCB0ZWxsIHlvdSBob3cgbG9uZyBpdCB3aWxsIHByb2JhYmx5IHRha2UgdXMuIEFkZGl0aW9uYWxseSwgd2Ugd2lsbCBuZWVkIGRldGFpbGVkIGNvbnRlbnQgdGhhdCBzaG91bGQgZmluYWxseSBiZSBvbiB5b3VyIHdlYnNpdGUuJyxcclxuXHRcdGJ1dHRvbjogJ0FwcHJvdmFsJyxcclxuXHR9LFxyXG5cdHtcclxuXHRcdGhlYWRpbmc6ICdQcm9qZWN0IGV4ZWN1dGlvbiEnLFxyXG5cdFx0dGV4dDogJ0xlYXZlIHRoaXMgc3RlcCB0byB1cyEgV2Ugd2lsbCBpbW1lZGlhdGVseSBzdGFydCBjcmVhdGluZyB5b3VyIGRyZWFtIGJ1c2luZXNzIGNhcmQgd2Vic2l0ZS4gRHVyaW5nIHRoaXMgdGltZSwgeW91IGNhbiBnaXZlIHVzIGFueSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBhbmQgd2Ugd2lsbCB0YWtlIGl0IGludG8gYWNjb3VudC4gQWZ0ZXIgdGhlIHdvcmsgaXMgZmluaXNoZWQsIGFsbCB0aGF0IHJlbWFpbnMgaXMgdG8gcGxhY2UgaXQgb24gaG9zdGluZy4nLFxyXG5cdFx0YnV0dG9uOiAnRXhlY3V0aW9uJyxcclxuXHR9LFxyXG5dO1xyXG5jb25zdCBwcm9jZXNzVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvY2Vzc2VzLWNvbnRlbnQtdGl0bGUnKTtcclxuY29uc3QgcHJvY2Vzc1RleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvY2Vzc2VzLWNvbnRlbnQtdGV4dCcpO1xyXG5jb25zdCBwcm9jZXNzQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9jZXNzZXMtbGlzdC1pdGVtJyk7XHJcbmNvbnN0IGNoZW5nZVByb2Nlc3MgPSAoZSkgPT4ge1xyXG5cdGNvbnN0IGJ0biA9IGUudGFyZ2V0O1xyXG5cclxuXHRpZiAoYnRuLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuXHRcdHJldHVybjtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y2xvc2VBbGxQcm9jZXNzZXMoKTtcclxuXHRcdGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuXHR9XHJcblx0c2V0Q29udGVudCgpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VBbGxQcm9jZXNzZXMgPSAoKSA9PiB7XHJcblx0cHJvY2Vzc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0Q29udGVudCA9ICgpID0+IHtcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHByb2Nlc3Nlc0luZm8ubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmIChwcm9jZXNzQnRuc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRcdHByb2Nlc3NUaXRsZS50ZXh0Q29udGVudCA9IHByb2Nlc3Nlc0luZm9baV0uaGVhZGluZztcclxuXHRcdFx0cHJvY2Vzc1RleHQudGV4dENvbnRlbnQgPSBwcm9jZXNzZXNJbmZvW2ldLnRleHQ7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG4vKiBQUk9KRUNUUyBQQVJBTExBWCAqL1xyXG5jb25zdCBwcmV2U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXJ2aWNlcycpO1xyXG5jb25zdCBuZXh0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJhbGxheC1oZXJvJyk7XHJcbmNvbnN0IHByb2plY3RzUGFyYWxsYXhIYW5kbGVyID0gKCkgPT4ge1xyXG5cdGlmICh2aWV3cG9ydFdpZHRoIDwgOTkyKXtcclxuICAgIG5leHRTZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoMCwgMCknXHJcbiAgICByZXR1cm4gXHJcbiAgfVxyXG4gIGNvbnN0IHByb2plY3RzU2hvd2Nhc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMtZGVza3RvcC1jbnQgLnByb2plY3RzLXNob3djYXNlJyk7XHJcbiAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdHMtZGVza3RvcC1jbnQgLnByb2plY3QnKVxyXG4gIGxldCBwcmV2U2VjdGlvbk9mZnNldCA9IHByZXZTZWN0aW9uLm9mZnNldFRvcDtcclxuXHRjb25zdCBzZWN0aW9uSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cyAuc2VjdGlvbl9faGVhZGluZycpO1xyXG4gIGNvbnN0IHNjcm9sbFZhbHVlID0gd2luZG93LnNjcm9sbFlcclxuXHRsZXQgZmlyc3RBbmNob3JQb2ludCA9XHJcblx0XHRwcmV2U2VjdGlvbk9mZnNldCArXHJcblx0XHRwcmV2U2VjdGlvbi5vZmZzZXRIZWlnaHQgK1xyXG5cdFx0c2VjdGlvbkhlYWRpbmcub2Zmc2V0SGVpZ2h0ICtcclxuICAgIE1hdGguZmxvb3IobmF2Lm9mZnNldEhlaWdodCAvIDIpXHJcblx0bGV0IHNlY29uZEFuY2hvclBvaW50ID0gbmV4dFNlY3Rpb24ub2Zmc2V0VG9wIC0gd2luZG93LmlubmVySGVpZ2h0ICsgTWF0aC5mbG9vcihuYXYub2Zmc2V0SGVpZ2h0IC8gMilcclxuICBpZiAoc2Nyb2xsVmFsdWUgPCBmaXJzdEFuY2hvclBvaW50KSB7XHJcbiAgICBwcm9qZWN0c1Nob3djYXNlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgQ2FsYygtMTAwJSArICR7d2luZG93LmlubmVySGVpZ2h0fXB4KSlgXHJcbiAgfVxyXG4gIGVsc2UgaWYgKHNjcm9sbFZhbHVlID4gc2Vjb25kQW5jaG9yUG9pbnQpe1xyXG4gICAgcHJvamVjdHNTaG93Y2FzZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7KHByb2plY3RzLmxlbmd0aCAtIDEpICogd2luZG93LmlubmVySGVpZ2h0fXB4KWBcclxuICB9XHJcbiAgZWxzZSBpZiAoc2Nyb2xsVmFsdWUgPiBmaXJzdEFuY2hvclBvaW50KSB7XHJcbiAgICBwcm9qZWN0c1Nob3djYXNlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoMCwgQ2FsYygtMTAwJSArICR7d2luZG93LmlubmVySGVpZ2h0ICsgKHNjcm9sbFZhbHVlIC0gZmlyc3RBbmNob3JQb2ludCkgKiAyfXB4KSlgXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBmaXJzdFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvY2Vzc2VzJyk7XHJcbmNvbnN0IHNlY29uZFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhcmFjdGVyaXN0aWNzJyk7XHJcbmNvbnN0IHBhcmFsbGF4SGVybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJhbGxheC1oZXJvJyk7XHJcblxyXG5jb25zdCBoYW5kbGVQYXJhbGxheFNlY3Rpb24gPSAoKSA9PiB7XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPCA5OTIpe1xyXG4gICAgc2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJ1xyXG4gICAgcGFyYWxsYXhIZXJvLnN0eWxlLmhlaWdodCA9ICcwJ1xyXG4gICAgcmV0dXJuXHJcbiAgfSAgXHJcbiAgY29uc3QgZmlyc3RBbmNob3IgPSBwYXJhbGxheEhlcm8ub2Zmc2V0VG9wIC0gd2luZG93LnNjcm9sbFlcclxuICBjb25zdCBzZWNvbmRBbmNob3IgPSBmaXJzdEFuY2hvciArIHZpZXdwb3J0V2lkdGhcclxuICBwYXJhbGxheEhlcm8uc3R5bGUuaGVpZ2h0ID0gYENhbGMoJHt3aW5kb3cuaW5uZXJIZWlnaHQgKyB2aWV3cG9ydFdpZHRofXB4IC0gNXJlbSlgXHJcbiAgaWYoc2Vjb25kQW5jaG9yIDw9IDApIHtcclxuICAgIGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKC0ke3ZpZXdwb3J0V2lkdGh9cHgsIDApYFxyXG4gICAgc2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7c2Vjb25kQW5jaG9yfXB4KWBcclxuICB9XHJcbiAgZWxzZSBpZihmaXJzdEFuY2hvciA8PSAwKSB7XHJcbiAgICBmaXJzdFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke2ZpcnN0QW5jaG9yfXB4LCAwKWBcclxuICAgIHNlY29uZFNlY3Rpb24uc3R5bGUudHJhbnNmb3JtID0gIGB0cmFuc2xhdGUoQ2FsYygxMDAlICsgJHtmaXJzdEFuY2hvcn1weCksIDApYFxyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGZpcnN0U2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDAsICR7Zmlyc3RBbmNob3J9cHgpYFxyXG4gICAgc2Vjb25kU2VjdGlvbi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDEwMCUsICR7Zmlyc3RBbmNob3J9cHgpYFxyXG4gIH1cclxufTtcclxuXHJcbi8vIHBhcmFsbGF4IEl0ZW1zXHJcblxyXG5jb25zdCBwYXJhbGxheFRleHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJhY3RlcmlzdGljcy1pdGVtJyk7XHJcbmNvbnN0IGhhbmRsZVBhcmFsbGF4SXRlbXMgPSAoZSkgPT4ge1xyXG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XHJcblx0XHRlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdyZXNldC1wb3MnKTtcclxuXHR9XHJcblx0ZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWRkLXBvcycpO1xyXG5cclxuXHRsZXQgeCA9IGUuY2xpZW50WDtcclxuXHRsZXQgeSA9IGUuY2xpZW50WTtcclxuXHRjb25zdCBtaWRkbGVYID0gZS50YXJnZXQub2Zmc2V0V2lkdGggLyAyO1xyXG5cdGNvbnN0IG1pZGRsZVkgPSBlLnRhcmdldC5vZmZzZXRIZWlnaHQgLyAyO1xyXG5cdGxldCBmaW5hbFggPSAobWlkZGxlWCAtIHgpIC8gNDA7XHJcblx0bGV0IGZpbmFsWSA9IChtaWRkbGVZIC0geSkgLyA0MDtcclxuXHJcblx0cGFyYWxsYXhUZXh0cy5mb3JFYWNoKCh0ZXh0KSA9PiB7XHJcblx0XHRpZiAodGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jlc2V0LXBvcycpKSB7XHJcblx0XHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgncmVzZXQtcG9zJyk7XHJcblx0XHR9XHJcblx0XHR0ZXh0LmNsYXNzTGlzdC5hZGQoJ2FkZC1wb3MnKTtcclxuXHJcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS15JywgYCR7ZmluYWxZfXB4YCk7XHJcblx0XHR0ZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXRyYW5zZm9ybS14JywgYCR7ZmluYWxYfXB4YCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZVBhcmFsbGF4SXRlbXMpO1xyXG5zZWNvbmRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG5cdHBhcmFsbGF4VGV4dHMuZm9yRWFjaCgodGV4dCkgPT4ge1xyXG5cdFx0dGV4dC5jbGFzc0xpc3QuYWRkKCdyZXNldC1wb3MnKTtcclxuXHRcdHRleHQuY2xhc3NMaXN0LnJlbW92ZSgnYWRkLXBvcycpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbi8vIGZ1bmN0aW9ucyBhY3Rpb25zXHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpO1xyXG5cdGlmICh2aWV3cG9ydFdpZHRoIDw9IDc2OCkge1xyXG5cdFx0bmF2SGFuZGxlcigpO1xyXG5cdH1cclxuXHRwcm9qZWN0c1BhcmFsbGF4SGFuZGxlcigpO1xyXG5cdGhhbmRsZVBhcmFsbGF4U2VjdGlvbigpO1xyXG59O1xyXG5cclxucHJvY2Vzc0J0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVuZ2VQcm9jZXNzKSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdGNhcmRPdXRzaWRlSGFuZGxlcihlKTtcclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdGhlYWRlclBhcmFsbGF4SGFuZGxlcigpO1xyXG5cdHByb2plY3RzUGFyYWxsYXhIYW5kbGVyKCk7XHJcblx0aGFuZGxlUGFyYWxsYXhTZWN0aW9uKCk7XHJcbn0pO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuXHR2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgaGVhZGVyUGFyYWxsYXhIYW5kbGVyKClcclxuXHRpZiAodmlld3BvcnRXaWR0aCA8PSA3NjgpIHtcclxuXHRcdG5hdkhhbmRsZXIoKTtcclxuXHR9XHJcblx0aWYgKHZpZXdwb3J0V2lkdGggPj0gOTkyKSByZXR1cm47XHJcbiAgaGFuZGxlUGFyYWxsYXhTZWN0aW9uKCk7XHJcbiAgcHJvamVjdHNQYXJhbGxheEhhbmRsZXIoKVxyXG5cdGNhcmRzQWN0aXZhdG9ySGFuZGxlcigpO1xyXG59KTtcclxuIl19
