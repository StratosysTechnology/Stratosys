"use strict";emailjs.init("Hhpvi3dgfNV-eaXKW");var btn=document.querySelector(".buttoners"),cross=document.querySelector(".cross"),formBox=document.querySelector(".form-box"),notifications=document.querySelector(".notifications"),notificationMessages={cooldown:'Error sending email.<br>Email limit reached: <span class="highlight">3</span>.<br>Try again 24h after sending the last email.',error:"Error sending email.<br>Please try again later.",success:'Email sent successfully.<br>Number of emails possible to send<br>in the next 24h: <span class="highlight"></span>.'},opennedForm=formBox.querySelector(".open-form-inner"),form=document.querySelector(".contact form"),formTelephoneControls=document.querySelectorAll(".form-controls"),numbers="0123456789",disableScroll=function(){var e=window.scrollY;window.onscroll=function(){window.scrollTo({top:e,behavior:"instant"})}},handleArrowRight=function(e){e=e.nextElementSibling;e&&e.focus()},handleArrowLeft=function(e){e=e.previousElementSibling;e&&e.focus()},handleInput=function(e,t){"Backspace"==e?""==t.value?handleArrowLeft(t):t.value="":""!=t.value&&handleArrowRight(t)},enableScroll=function(){window.onscroll=function(){}},closeFormIfOutside=function(e){opennedForm.contains(e.target)||e.target==btn||(formBox.setAttribute("aria-hidden","true"),enableScroll())},resetForm=function(){var e=form.querySelectorAll("input"),t=form.querySelector("textarea");e.forEach(function(e){e.value=""}),t.value=""},createNotification=function(e,t){var o=document.createElement("div"),e=(o.setAttribute("data-success",e),document.createElement("p"));e.innerHTML=t,o.append(e),t==notificationMessages.success&&(t=3-+document.cookie.split(";").find(function(e){return e.trim().startsWith("limit")}).split("=")[1],e.querySelector(".highlight").append(t)),o.classList.add("notification"),notifications.append(o),setTimeout(function(){o.classList.add("shown"),setTimeout(function(){o.classList.remove("shown"),setTimeout(function(){o.remove()},500)},5e3)},100)};btn.addEventListener("click",function(){disableScroll(),formBox.setAttribute("aria-hidden","false")}),cross.addEventListener("click",function(){enableScroll(),formBox.setAttribute("aria-hidden","true")}),formTelephoneControls.forEach(function(t){t.addEventListener("keydown",function(e){"ArrowRight"==e.key?handleArrowRight(t):"ArrowLeft"==e.key?handleArrowLeft(t):handleInput(e.key,t)}),t.addEventListener("input",function(e){numbers.includes(e.target.value)||(e.target.value="")})}),form.addEventListener("submit",function(e){e.preventDefault();var o,e=document.cookie.split(";");e.find(function(e){return e.trim().startsWith("emailCooldown")})?(formBox.classList.add("hidden"),enableScroll(),createNotification("false",notificationMessages.cooldown)):(e=e.find(function(e){return e.trim().startsWith("limit")}),3<=(o=e?+e.split("=")[1]:0)?((e=new Date).setTime(e.getTime()+72e5),document.cookie="emailCooldown = emailCooldown; expires =  ".concat(e),document.cookie="limit=3; expires = ".concat(e),resetForm(),formBox.setAttribute("aria-hidden","true"),enableScroll(),createNotification("false",notificationMessages.cooldown)):emailjs.sendForm("service_pk7b8o3","template_ykytfdk",form).then(function(){var e,t;formBox.setAttribute("aria-hidden","true"),enableScroll(),resetForm(),e=++o,(t=new Date).setTime(t.getTime()+864e5),document.cookie="limit=".concat(e,"; expires = ").concat(t),createNotification("true",notificationMessages.success)}).catch(function(){createNotification("false",notificationMessages.error)}))}),window.addEventListener("click",function(e){return closeFormIfOutside(e)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlY3Rpb25zL2NvbnRhY3QuanMiXSwibmFtZXMiOlsiZW1haWxqcyIsImluaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJidG4iLCJjcm9zcyIsImZvcm1Cb3giLCJub3RpZmljYXRpb25zIiwiY29vbGRvd24iLCJub3RpZmljYXRpb25NZXNzYWdlcyIsImVycm9yIiwib3Blbm5lZEZvcm0iLCJmb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsIm51bWJlcnMiLCJkaXNhYmxlU2Nyb2xsIiwic2Nyb2xsVG9wIiwid2luZG93Iiwic2Nyb2xsWSIsIm9uc2Nyb2xsIiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsIm5leHRDb250cm9sIiwiY29udHJvbCIsIm5leHRFbGVtZW50U2libGluZyIsImZvY3VzIiwicHJldkNvbnRyb2wiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiaGFuZGxlQXJyb3dMZWZ0Iiwia2V5IiwidmFsdWUiLCJoYW5kbGVBcnJvd1JpZ2h0IiwiZW5hYmxlU2Nyb2xsIiwiaW5wdXRzIiwidGV4dGFyZWEiLCJlIiwidGFyZ2V0IiwiZm9yRWFjaCIsImlucHV0IiwiY3JlYXRlTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImlzU3VjY2VzcyIsImlubmVySFRNTCIsIm1lc3NhZ2UiLCJzdGFydHNXaXRoIiwiaGlnaGxpZ2h0U3BhbiIsImxpbWl0VmFsdWUiLCJsaW1pdENvb2tpZSIsImFwcGVuZCIsInAiLCJjbGFzc0xpc3QiLCJzdWNjZXNzIiwiYWRkIiwic3BsaXQiLCJmaW5kIiwiY29va2llIiwidHJpbSIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9ybVRlbGVwaG9uZUNvbnRyb2xzIiwiaW5jbHVkZXMiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGUiLCJnZXRUaW1lIiwiZGF5IiwicmVzZXRGb3JtIiwiY29va2llcyIsIkRhdGUiLCJjb250YWN0U2VydmljZUlkIiwiY29udGFjdEZvcm1JZCIsImNvbmNhdCIsInNlbmRGb3JtIiwidGhlbiIsInNldFRpbWUiLCJjbG9zZUZvcm1JZk91dHNpZGUiXSwibWFwcGluZ3MiOiJhQUNBQSxRQUFRQyxLQUFLLG1CQUFtQixFQUFoQ0QsSUFBQUEsSUFBWUUsU0FBQ0MsY0FBb0IsWUFBQSxFQUUzQkMsTUFBTUYsU0FBU0MsY0FBYyxRQUFZLEVBQ3pDRSxRQUFRSCxTQUFTQyxjQUFjLFdBQVMsRUFDeENHLGNBQWtCSixTQUFDQyxjQUFjLGdCQUFZLEVBQzdDSSxxQkFBeUJKLENBQy9CSyxTQUFNQyxnSUFDSkQsTUFBQUEsa0RBQ0FFLFFBQU8sb0hBRVQsRUFBQ0MsWUFBQUwsUUFBQUgsY0FBQSxrQkFBQSxFQUNLUSxLQUFBQSxTQUFjTCxjQUFRSCxlQUFjLEVBQ3BDUyxzQkFBZ0JULFNBQWNVLGlCQUFnQixnQkFBQSxFQUc5Q0MsUUFBVSxhQUNWQyxjQUFnQixXQUNwQixJQUFNQyxFQUFZQyxPQUFPQyxRQUN6QkQsT0FBT0UsU0FBVyxXQUNoQkYsT0FBT0csU0FBUyxDQUNkQyxJQUFLTCxFQUNMTSxTQUFVLFNBQ1osQ0FBQyxDQUNILENBQ0YsRUFHUUMsaUJBQWNDLFNBQUFBLEdBQ2pCRCxFQUFZQyxFQUFBQyxtQkFDYkYsR0FDRkEsRUFBQUcsTUFBQSxDQUdGLEVBRUtDLGdCQUFZLFNBQUFILEdBQ2JHLEVBQWtCSCxFQUFDSSx1QkFDckJELEdBQ0RBLEVBQUFELE1BQUEsQ0FBRCxFQUtNRyxZQUFBQSxTQUFlQyxFQUFDTixHQUViLGFBREpNLEVBRW1CLElBQWxCTixFQUFRTyxNQUNWRixnQkFBQUwsQ0FBQSxFQUlFUSxFQUFBQSxNQUFnQixHQUtELElBQWZDLEVBQUFBLE9BQ0poQixpQkFBa0JPLENBQUEsQ0FIcEIsRUFTSVMsYUFBYyxXQUNoQmhCLE9BQUFFLFNBQUEsWUFDRixFQUdRZSxtQkFBY3JCLFNBQUFBLEdBQ2RzQixZQUFXdkIsU0FBS1QsRUFBQUEsTUFBYSxHQUFDaUMsRUFBQUMs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LEVBUlJyRSxRQVVFQSxhQUFRcUMsY0FBMEIsTUFBRSxFQVR0Q1YsYUFVRUEsRUFURk8sbUJBVWEsUUFBQS9CLHFCQUFBRCxRQUFBLEdBT2ZSLFFBQUEyRSxTQUhlLGtCQUNRLG1CQUV2Qi9ELElBQUEsRUFDRGdFLEtBQ0ksV0FyQ2MsSUFBQTdDLEVBQ29CbUMsRUFxQ3JDNUQsUUFBUStDLGFBQWMsY0FBUyxNQUFBLEVBQy9CcEIsYUFBYyxFQUNkTyxVQUFBQSxFQXhDaUJULEVBeUNuQixFQUFBa0IsR0F4Q3VDaUIsRUFBSVIsSUFBT0MsTUFBMkJrQixRQUFBWCxFQUFBQyxRQUFBLEVBQXZFakIsS0FBdUUsRUFDM0VoRCxTQUFJK0MsT0FBVSxTQUFBeUIsT0FBQTNDLEVBQUEsY0FBQSxFQUFBMkMsT0FBQVIsQ0FBQSxFQXdDaEIxQixtQkFBQSxPQUFBL0IscUJBQUE2QyxPQUFBLENBRUksQ0FBQ1EsRUFBQUEsTUFBaUNnQixXQUFzQnRDLG1CQUFBLFFBQUEvQixxQkFBQUMsS0FBQSxDQVZ4RCxDQUFDLEVBUVAsQ0FBQyxFQUVETyxPQUFPNkMsaUJBQWlCLFFBQVMsU0FBQzFCLEdBQUMsT0FBSzBDLG1CQUFtQjFDLENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6InNlY3Rpb25zL2NvbnRhY3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXHJcbmVtYWlsanMuaW5pdCgnSGhwdmkzZGdmTlYtZWFYS1cnKVxyXG5cclxuY29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbmVycycpXHJcbmNvbnN0IGNyb3NzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyb3NzJylcclxuY29uc3QgZm9ybUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWJveCcpXHJcbmNvbnN0IG5vdGlmaWNhdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9ucycpXHJcbmNvbnN0IG5vdGlmaWNhdGlvbk1lc3NhZ2VzID0ge1xyXG4gIGNvb2xkb3duOiAnRXJyb3Igc2VuZGluZyBlbWFpbC48YnI+RW1haWwgbGltaXQgcmVhY2hlZDogPHNwYW4gY2xhc3M9XCJoaWdobGlnaHRcIj4zPC9zcGFuPi48YnI+VHJ5IGFnYWluIDI0aCBhZnRlciBzZW5kaW5nIHRoZSBsYXN0IGVtYWlsLicsXHJcbiAgZXJyb3I6ICdFcnJvciBzZW5kaW5nIGVtYWlsLjxicj5QbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgc3VjY2VzczogJ0VtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5Ljxicj5OdW1iZXIgb2YgZW1haWxzIHBvc3NpYmxlIHRvIHNlbmQ8YnI+aW4gdGhlIG5leHQgMjRoOiA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPjwvc3Bhbj4uJ1xyXG59XHJcbmNvbnN0IG9wZW5uZWRGb3JtID0gZm9ybUJveC5xdWVyeVNlbGVjdG9yKCcub3Blbi1mb3JtLWlubmVyJylcclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0IGZvcm0nKVxyXG5jb25zdCBmb3JtVGVsZXBob25lQ29udHJvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb250cm9scycpXHJcblxyXG5jb25zdCBudW1iZXJzID0gJzAxMjM0NTY3ODknXHJcbmNvbnN0IGRpc2FibGVTY3JvbGwgPSAoKSA9PiB7XHJcbiAgY29uc3Qgc2Nyb2xsVG9wID0gd2luZG93LnNjcm9sbFlcclxuICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oe1xyXG4gICAgICB0b3A6IHNjcm9sbFRvcCxcclxuICAgICAgYmVoYXZpb3I6ICdpbnN0YW50JyxcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBoYW5kbGVBcnJvd1JpZ2h0ID0gKGNvbnRyb2wpID0+IHtcclxuICBjb25zdCBuZXh0Q29udHJvbCA9IGNvbnRyb2wubmV4dEVsZW1lbnRTaWJsaW5nXHJcbiAgaWYobmV4dENvbnRyb2wpe1xyXG4gICAgbmV4dENvbnRyb2wuZm9jdXMoKVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgaGFuZGxlQXJyb3dMZWZ0ID0gKGNvbnRyb2wpID0+IHtcclxuICBjb25zdCBwcmV2Q29udHJvbCA9IGNvbnRyb2wucHJldmlvdXNFbGVtZW50U2libGluZ1xyXG4gIGlmKHByZXZDb250cm9sKXtcclxuICAgIHByZXZDb250cm9sLmZvY3VzKClcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUlucHV0ID0gKGtleSwgY29udHJvbCkgPT4ge1xyXG4gIGlmKGtleSA9PSAnQmFja3NwYWNlJykge1xyXG4gICAgaWYoY29udHJvbC52YWx1ZSA9PSAnJyl7XHJcbiAgICAgIGhhbmRsZUFycm93TGVmdChjb250cm9sKVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnRyb2wudmFsdWUgPSAnJ1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGlmKGNvbnRyb2wudmFsdWUgIT0gJycpe1xyXG4gICAgICBoYW5kbGVBcnJvd1JpZ2h0KGNvbnRyb2wpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBlbmFibGVTY3JvbGwgPSAoKSA9PiB7XHJcbiAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge31cclxufVxyXG5cclxuY29uc3QgY2xvc2VGb3JtSWZPdXRzaWRlID0gKGUpID0+IHtcclxuICBpZighb3Blbm5lZEZvcm0uY29udGFpbnMoZS50YXJnZXQpICYmIGUudGFyZ2V0ICE9IGJ0bil7XHJcbiAgICBmb3JtQm94LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpXHJcbiAgICBlbmFibGVTY3JvbGwoKVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgcmVzZXRGb3JtID0gKCkgPT4ge1xyXG4gIGNvbnN0IGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKVxyXG4gIGNvbnN0IHRleHRhcmVhID0gZm9ybS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpXHJcbiAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgaW5wdXQudmFsdWUgPSAnJ1xyXG4gIH0pXHJcbiAgdGV4dGFyZWEudmFsdWUgPSAnJ1xyXG59XHJcblxyXG5jb25zdCBjcmVhdGVOb3RpZmljYXRpb24gPSAoaXNTdWNjZXNzLCBtZXNzYWdlKSA9PiB7XHJcbiAgY29uc3Qgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICBub3RpZmljYXRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXN1Y2Nlc3MnLCBpc1N1Y2Nlc3MpXHJcbiAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2VcclxuICAgIG5vdGlmaWNhdGlvbi5hcHBlbmQocClcclxuICAgIGlmKG1lc3NhZ2UgPT0gbm90aWZpY2F0aW9uTWVzc2FnZXMuc3VjY2Vzcyl7XHJcbiAgICAgIGNvbnN0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKVxyXG4gICAgICBjb25zdCBsaW1pdENvb2tpZSA9IGNvb2tpZXMuZmluZChjb29raWUgPT4gY29va2llLnRyaW0oKS5zdGFydHNXaXRoKCdsaW1pdCcpKVxyXG4gICAgICBjb25zdCBsaW1pdFZhbHVlID0gMyAtICtsaW1pdENvb2tpZS5zcGxpdCgnPScpWzFdXHJcbiAgICAgIGNvbnN0IGhpZ2hsaWdodFNwYW4gPSBwLnF1ZXJ5U2VsZWN0b3IoJy5oaWdobGlnaHQnKVxyXG4gICAgICBoaWdobGlnaHRTcGFuLmFwcGVuZChsaW1pdFZhbHVlKVxyXG4gICAgfVxyXG4gIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QuYWRkKCdub3RpZmljYXRpb24nKVxyXG4gIG5vdGlmaWNhdGlvbnMuYXBwZW5kKG5vdGlmaWNhdGlvbilcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QuYWRkKCdzaG93bicpXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3duJylcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgbm90aWZpY2F0aW9uLnJlbW92ZSgpXHJcbiAgICAgIH0sIDUwMClcclxuICAgIH0sIDUwMDApXHJcbiAgfSwgMTAwKVxyXG59XHJcblxyXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgZGlzYWJsZVNjcm9sbCgpXHJcblx0Zm9ybUJveC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJylcclxufSlcclxuY3Jvc3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgZW5hYmxlU2Nyb2xsKClcclxuXHRmb3JtQm94LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpXHJcbn0pXHJcbmZvcm1UZWxlcGhvbmVDb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG4gIGNvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICBpZihlLmtleSA9PSAnQXJyb3dSaWdodCcpe1xyXG4gICAgICBoYW5kbGVBcnJvd1JpZ2h0KGNvbnRyb2wpXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGUua2V5ID09ICdBcnJvd0xlZnQnKXtcclxuICAgICAgaGFuZGxlQXJyb3dMZWZ0KGNvbnRyb2wpXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaGFuZGxlSW5wdXQoZS5rZXksIGNvbnRyb2wpXHJcbiAgICB9XHJcbiAgfSlcclxuICBjb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuICAgIGlmKCFudW1iZXJzLmluY2x1ZGVzKGUudGFyZ2V0LnZhbHVlKSl7XHJcbiAgICAgIGUudGFyZ2V0LnZhbHVlID0gJydcclxuICAgIH1cclxuICB9KVxyXG59KVxyXG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgY29uc3Qgc2V0U2VuZExpbWl0ID0gKHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBkYXkgPSAyNCAqIDYwICogNjAgKiAxMDAwXHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxyXG4gICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgZGF5KVxyXG4gICAgZG9jdW1lbnQuY29va2llID0gYGxpbWl0PSR7dmFsdWV9OyBleHBpcmVzID0gJHtkYXRlfWBcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpXHJcbiAgY29uc3QgY29vbGRvd25Db29raWUgPSBjb29raWVzLmZpbmQoY29va2llID0+IGNvb2tpZS50cmltKCkuc3RhcnRzV2l0aCgnZW1haWxDb29sZG93bicpKVxyXG4gIGlmKCFjb29sZG93bkNvb2tpZSl7XHJcbiAgICBsZXQgbGltaXRDb29raWUgPSBjb29raWVzLmZpbmQoY29va2llID0+IGNvb2tpZS50cmltKCkuc3RhcnRzV2l0aCgnbGltaXQnKSlcclxuICAgIGxldCBsaW1pdFZhbHVlXHJcbiAgICBpZighbGltaXRDb29raWUpe1xyXG4gICAgICBsaW1pdFZhbHVlID0gMFxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGxpbWl0VmFsdWUgPSArbGltaXRDb29raWUuc3BsaXQoJz0nKVsxXVxyXG4gICAgfVxyXG4gICAgaWYobGltaXRWYWx1ZSA+PSAzKXtcclxuICAgICAgY29uc3QgdHdvSG91cnMgPSAxMjAgKiA2MCAqIDEwMDBcclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKClcclxuICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgdHdvSG91cnMpXHJcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGBlbWFpbENvb2xkb3duID0gZW1haWxDb29sZG93bjsgZXhwaXJlcyA9ICAke2RhdGV9YFxyXG4gICAgICBkb2N1bWVudC5jb29raWUgPSBgbGltaXQ9MzsgZXhwaXJlcyA9ICR7ZGF0ZX1gXHJcbiAgICAgIHJlc2V0Rm9ybSgpXHJcbiAgICAgIGZvcm1Cb3guc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJylcclxuICAgICAgZW5hYmxlU2Nyb2xsKClcclxuICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKCdmYWxzZScsIG5vdGlmaWNhdGlvbk1lc3NhZ2VzLmNvb2xkb3duKVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRhY3RTZXJ2aWNlSWQgPSAnc2VydmljZV9wazdiOG8zJ1xyXG4gICAgICBjb25zdCBjb250YWN0Rm9ybUlkID0gJ3RlbXBsYXRlX3lreXRmZGsnXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICBlbWFpbGpzLnNlbmRGb3JtKGNvbnRhY3RTZXJ2aWNlSWQsIGNvbnRhY3RGb3JtSWQsIGZvcm0pXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBmb3JtQm94LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpXHJcbiAgICAgICAgZW5hYmxlU2Nyb2xsKClcclxuICAgICAgICByZXNldEZvcm0oKVxyXG4gICAgICAgIHNldFNlbmRMaW1pdCgrK2xpbWl0VmFsdWUpXHJcbiAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKCd0cnVlJywgbm90aWZpY2F0aW9uTWVzc2FnZXMuc3VjY2VzcylcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICBjcmVhdGVOb3RpZmljYXRpb24oJ2ZhbHNlJywgbm90aWZpY2F0aW9uTWVzc2FnZXMuZXJyb3IpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgZW5hYmxlU2Nyb2xsKClcclxuICAgIGNyZWF0ZU5vdGlmaWNhdGlvbignZmFsc2UnLCBub3RpZmljYXRpb25NZXNzYWdlcy5jb29sZG93bilcclxuICB9XHJcbn0pXHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gY2xvc2VGb3JtSWZPdXRzaWRlKGUpKVxyXG5cclxuXHJcbiJdfQ==
